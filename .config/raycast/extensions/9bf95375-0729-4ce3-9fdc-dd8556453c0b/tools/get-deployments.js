"use strict";var c=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var f=Object.prototype.hasOwnProperty;var v=(t,e)=>{for(var o in e)c(t,o,{get:e[o],enumerable:!0})},g=(t,e,o,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of y(e))!f.call(t,r)&&r!==o&&c(t,r,{get:()=>e[r],enumerable:!(n=u(e,r))||n.enumerable});return t};var j=t=>g(c({},"__esModule",{value:!0}),t);var F={};v(F,{default:()=>p});module.exports=j(F);var s=require("@raycast/api"),w=(0,s.getPreferenceValues)().accessToken,l={Authorization:"Bearer "+w},x=Object.entries(l),b="https://api.vercel.com/";function E(t,e,o=100){let n=b+"v6/deployments",r=`?limit=${o}&teamId=${t??""}`;return e&&(r+=`&projectId=${e}`),n+r}async function d(t,e=100,o=300){try{let n=E(t,void 0,e),a=await(await fetch(n,{method:"get",headers:l})).json(),{deployments:h,pagination:i}=a;for(;i?.next&&h.length<o;){let m=await(await fetch(n+"&until="+i.next,{method:"get",headers:l})).json();i=m.pagination,a.deployments.push(...m.deployments)}return a.deployments}catch(n){throw console.error(n),(0,s.showToast)({style:s.Toast.Style.Failure,title:"Failed to fetch deployments"}),new Error("Failed to fetch deployments")}}async function p({teamId:t}){return d(t??void 0,100,100)}
