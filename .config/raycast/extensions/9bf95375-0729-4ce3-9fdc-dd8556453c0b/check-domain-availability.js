"use strict";var m=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var j=Object.prototype.hasOwnProperty;var b=(e,t)=>{for(var r in t)m(e,r,{get:t[r],enumerable:!0})},E=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of w(t))!j.call(e,o)&&o!==r&&m(e,o,{get:()=>t[o],enumerable:!(i=g(t,o))||i.enumerable});return e};var P=e=>E(m({},"__esModule",{value:!0}),e);var x={};b(x,{default:()=>v});module.exports=P(x);var s=require("react"),n=require("@raycast/api");var f=require("@raycast/api");var a=require("@raycast/api"),F=(0,a.getPreferenceValues)().accessToken,d={Authorization:"Bearer "+F},k=Object.entries(d),p="https://api.vercel.com/";async function h(){try{return(await(await fetch(p+"www/user",{method:"get",headers:d})).json()).user}catch(e){throw console.error(e),(0,a.showToast)({style:a.Toast.Style.Failure,title:"Failed to fetch user info"}),new Error("Failed to fetch user info")}}async function u(e){let r=await(await fetch(p+`v4/domains/status?name=${e}`,{method:"get",headers:d})).json();return r.error?"Check domain availability failed. Please verify that the domain is valid or try again later.":r.available}var $=async()=>{if((0,f.getPreferenceValues)().accessToken.length!==24)throw new Error("Invalid token length. Expected 24 characters.");if(!await h())throw new Error("Failed to fetch user data. Token may be invalid.");return!0},y=$;var l=require("react/jsx-runtime");function v({arguments:{domain:e}}){let[t,r]=(0,s.useState)(!0),[i,o]=(0,s.useState)(null);return(0,s.useEffect)(()=>{(async()=>{try{y();let c=await u(e);o(typeof c=="boolean"?c:!1)}catch(c){console.error("Error checking domain availability:",c),o(!1)}finally{r(!1)}})()},[e]),(0,l.jsx)(n.List,{isLoading:t,children:i?(0,l.jsx)(n.List.EmptyView,{icon:{source:n.Icon.CheckCircle,tintColor:n.Color.Green},title:"Available",description:`${e} is available.`}):(0,l.jsx)(n.List.EmptyView,{icon:{source:n.Icon.XMarkCircle,tintColor:n.Color.Red},title:"Not Available",description:`${e} is not available.`})})}
