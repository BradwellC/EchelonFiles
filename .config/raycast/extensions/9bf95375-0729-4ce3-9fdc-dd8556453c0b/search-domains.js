"use strict";var $r=Object.create;var Te=Object.defineProperty;var wr=Object.getOwnPropertyDescriptor;var vr=Object.getOwnPropertyNames;var Er=Object.getPrototypeOf,kr=Object.prototype.hasOwnProperty;var Ze=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),St=(e,t)=>{for(var r in t)Te(e,r,{get:t[r],enumerable:!0})},Tt=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of vr(t))!kr.call(e,a)&&a!==r&&Te(e,a,{get:()=>t[a],enumerable:!(n=wr(t,a))||n.enumerable});return e};var ae=(e,t,r)=>(r=e!=null?$r(Er(e)):{},Tt(t||!e||!e.__esModule?Te(r,"default",{value:e,enumerable:!0}):r,e)),xr=e=>Tt(Te({},"__esModule",{value:!0}),e);var Ot=Ze(Ct=>{"use strict";var de=require("react");function Tr(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Rr=typeof Object.is=="function"?Object.is:Tr,_r=de.useState,Ar=de.useEffect,Cr=de.useLayoutEffect,Or=de.useDebugValue;function Ir(e,t){var r=t(),n=_r({inst:{value:r,getSnapshot:t}}),a=n[0].inst,o=n[1];return Cr(function(){a.value=r,a.getSnapshot=t,Qe(a)&&o({inst:a})},[e,r,t]),Ar(function(){return Qe(a)&&o({inst:a}),e(function(){Qe(a)&&o({inst:a})})},[e]),Or(r),r}function Qe(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Rr(e,r)}catch{return!0}}function Pr(e,t){return t()}var Ur=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Pr:Ir;Ct.useSyncExternalStore=de.useSyncExternalStore!==void 0?de.useSyncExternalStore:Ur});var Pt=Ze(It=>{"use strict";process.env.NODE_ENV!=="production"&&(function(){function e(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}function t(f,p){d||a.startTransition===void 0||(d=!0,console.error("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var u=p();if(!h){var E=p();o(u,E)||(console.error("The result of getSnapshot should be cached to avoid an infinite loop"),h=!0)}E=s({inst:{value:u,getSnapshot:p}});var l=E[0].inst,D=E[1];return c(function(){l.value=u,l.getSnapshot=p,r(l)&&D({inst:l})},[f,u,p]),i(function(){return r(l)&&D({inst:l}),f(function(){r(l)&&D({inst:l})})},[f]),g(u),u}function r(f){var p=f.getSnapshot;f=f.value;try{var u=p();return!o(f,u)}catch{return!0}}function n(f,p){return p()}typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());var a=require("react"),o=typeof Object.is=="function"?Object.is:e,s=a.useState,i=a.useEffect,c=a.useLayoutEffect,g=a.useDebugValue,d=!1,h=!1,v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?n:t;It.useSyncExternalStore=a.useSyncExternalStore!==void 0?a.useSyncExternalStore:v,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error())})()});var Ut=Ze((An,et)=>{"use strict";process.env.NODE_ENV==="production"?et.exports=Ot():et.exports=Pt()});var kn={};St(kn,{default:()=>En});module.exports=xr(kn);var re=require("@raycast/api");var ze=require("@raycast/api"),mt=require("@raycast/api");var Xt=require("react"),We=require("@raycast/api");var ie=require("@raycast/api"),Sr=(0,ie.getPreferenceValues)().accessToken,Ye={Authorization:"Bearer "+Sr},Rt=Object.entries(Ye),Xe="https://api.vercel.com/";async function Re(){try{return(await(await fetch(Xe+"www/user",{method:"get",headers:Ye})).json()).user}catch(e){throw console.error(e),(0,ie.showToast)({style:ie.Toast.Style.Failure,title:"Failed to fetch user info"}),new Error("Failed to fetch user info")}}async function _t(){let t=await(await fetch(Xe+"v1/teams",{method:"get",headers:Ye})).json(),r=[];for(let n of t.teams)r.push(n);return r}function At(e,t=100){return Xe+`v5/domains?teamId=${e??""}&limit=${t}`}var U=ae(require("react"),1),Zt=ae(Ut(),1);var V=ae(require("react"),1);var se={};St(se,{ERROR_REVALIDATE_EVENT:()=>Dr,FOCUS_EVENT:()=>Dt,MUTATE_EVENT:()=>Vt,RECONNECT_EVENT:()=>Lt});var Dt=0,Lt=1,Vt=2,Dr=3;var jt=Object.prototype.hasOwnProperty;function he(e,t){var r,n;if(e===t)return!0;if(e&&t&&(r=e.constructor)===t.constructor){if(r===Date)return e.getTime()===t.getTime();if(r===RegExp)return e.toString()===t.toString();if(r===Array){if((n=e.length)===t.length)for(;n--&&he(e[n],t[n]););return n===-1}if(!r||typeof e=="object"){n=0;for(r in e)if(jt.call(e,r)&&++n&&!jt.call(t,r)||!(r in t)||!he(e[r],t[r]))return!1;return Object.keys(t).length===n}}return e!==e&&t!==t}var J=new WeakMap,ee=()=>{},P=ee(),pe=Object,y=e=>e===P,B=e=>typeof e=="function",q=(e,t)=>({...e,...t}),Pe=e=>B(e.then),tt={},_e={},ct="undefined",me=typeof window!=ct,Ce=typeof document!=ct,Nt=me&&"Deno"in window,Wt=()=>me&&typeof window.requestAnimationFrame!=ct,Ue=(e,t)=>{let r=J.get(e);return[()=>!y(t)&&e.get(t)||tt,n=>{if(!y(t)){let a=e.get(t);t in _e||(_e[t]=a),r[5](t,q(a,n),a||tt)}},r[6],()=>!y(t)&&t in _e?_e[t]:!y(t)&&e.get(t)||tt]},at=!0,Lr=()=>at,[st,ot]=me&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[ee,ee],Vr=()=>{let e=Ce&&document.visibilityState;return y(e)||e!=="hidden"},jr=e=>(Ce&&document.addEventListener("visibilitychange",e),st("focus",e),()=>{Ce&&document.removeEventListener("visibilitychange",e),ot("focus",e)}),Fr=e=>{let t=()=>{at=!0,e()},r=()=>{at=!1};return st("online",t),st("offline",r),()=>{ot("online",t),ot("offline",r)}},Mt={isOnline:Lr,isVisible:Vr},zt={initFocus:jr,initReconnect:Fr},De=!V.default.useId,ce=!me||Nt,lt=e=>Wt()?window.requestAnimationFrame(e):setTimeout(e,1),ge=ce?V.useEffect:V.useLayoutEffect,rt=typeof navigator<"u"&&navigator.connection,it=!ce&&rt&&(["slow-2g","2g"].includes(rt.effectiveType)||rt.saveData),Ae=new WeakMap,Nr=e=>pe.prototype.toString.call(e),nt=(e,t)=>e===`[object ${t}]`,Wr=0,Oe=e=>{let t=typeof e,r=Nr(e),n=nt(r,"Date"),a=nt(r,"RegExp"),o=nt(r,"Object"),s,i;if(pe(e)===e&&!n&&!a){if(s=Ae.get(e),s)return s;if(s=++Wr+"~",Ae.set(e,s),Array.isArray(e)){for(s="@",i=0;i<e.length;i++)s+=Oe(e[i])+",";Ae.set(e,s)}if(o){s="#";let c=pe.keys(e).sort();for(;!y(i=c.pop());)y(e[i])||(s+=i+":"+Oe(e[i])+",");Ae.set(e,s)}}else s=n?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return s},ve=e=>{if(B(e))try{e=e()}catch{e=""}let t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?Oe(e):"",[e,t]},Mr=0,we=()=>++Mr;async function Le(...e){let[t,r,n,a]=e,o=q({populateCache:!0,throwOnError:!0},typeof a=="boolean"?{revalidate:a}:a||{}),s=o.populateCache,i=o.rollbackOnError,c=o.optimisticData,g=v=>typeof i=="function"?i(v):i!==!1,d=o.throwOnError;if(B(r)){let v=r,f=[],p=t.keys();for(let u of p)!/^\$(inf|sub)\$/.test(u)&&v(t.get(u)._k)&&f.push(u);return Promise.all(f.map(h))}return h(r);async function h(v){let[f]=ve(v);if(!f)return;let[p,u]=Ue(t,f),[E,l,D,R]=J.get(t),$=()=>{let _=E[f];return(B(o.revalidate)?o.revalidate(p().data,v):o.revalidate!==!1)&&(delete D[f],delete R[f],_&&_[0])?_[0](2).then(()=>p().data):p().data};if(e.length<3)return $();let x=n,C,O=!1,k=we();l[f]=[k,0];let G=!y(c),F=p(),N=F.data,I=F._c,M=y(I)?N:I;if(G&&(c=B(c)?c(M,N):c,u({data:c,_c:M})),B(x))try{x=x(M)}catch(_){C=_,O=!0}if(x&&Pe(x))if(x=await x.catch(_=>{C=_,O=!0}),k!==l[f][0]){if(O)throw C;return x}else O&&G&&g(C)&&(s=!0,u({data:M,_c:P}));if(s&&!O)if(B(s)){let _=s(x,M);u({data:_,error:P,_c:P})}else u({data:x,error:P,_c:P});if(l[f][1]=we(),Promise.resolve($()).then(()=>{u({_c:P})}),O){if(d)throw C;return}return x}}var Ft=(e,t)=>{for(let r in e)e[r][0]&&e[r][0](t)},ut=(e,t)=>{if(!J.has(e)){let r=q(zt,t),n=Object.create(null),a=Le.bind(P,e),o=ee,s=Object.create(null),i=(d,h)=>{let v=s[d]||[];return s[d]=v,v.push(h),()=>v.splice(v.indexOf(h),1)},c=(d,h,v)=>{e.set(d,h);let f=s[d];if(f)for(let p of f)p(h,v)},g=()=>{if(!J.has(e)&&(J.set(e,[n,Object.create(null),Object.create(null),Object.create(null),a,c,i]),!ce)){let d=r.initFocus(setTimeout.bind(P,Ft.bind(P,n,0))),h=r.initReconnect(setTimeout.bind(P,Ft.bind(P,n,1)));o=()=>{d&&d(),h&&h(),J.delete(e)}}};return g(),[e,a,g,o]}return[e,J.get(e)[4]]},zr=(e,t,r,n,a)=>{let o=r.errorRetryCount,s=a.retryCount,i=~~((Math.random()+.5)*(1<<(s<8?s:8)))*r.errorRetryInterval;!y(o)&&s>o||setTimeout(n,i,a)},Bt=he,[Ve,Gt]=ut(new Map),je=q({onLoadingSlow:ee,onSuccess:ee,onError:ee,onErrorRetry:zr,onDiscarded:ee,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:it?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:it?5e3:3e3,compare:Bt,isPaused:()=>!1,cache:Ve,mutate:Gt,fallback:{}},Mt),ft=(e,t)=>{let r=q(e,t);if(t){let{use:n,fallback:a}=e,{use:o,fallback:s}=t;n&&o&&(r.use=n.concat(o)),a&&s&&(r.fallback=q(a,s))}return r},Ie=(0,V.createContext)({}),dt=e=>{let{value:t}=e,r=(0,V.useContext)(Ie),n=B(t),a=(0,V.useMemo)(()=>n?t(r):t,[n,r,t]),o=(0,V.useMemo)(()=>n?a:ft(r,a),[n,r,a]),s=a&&a.provider,i=(0,V.useRef)(P);s&&!i.current&&(i.current=ut(s(o.cache||Ve),a));let c=i.current;return c&&(o.cache=c[0],o.mutate=c[1]),ge(()=>{if(c)return c[2]&&c[2](),c[3]},[]),(0,V.createElement)(Ie.Provider,q(e,{value:o}))};var Ht="$inf$";var Fe=ae(require("react"),1);var Kt=me&&window.__SWR_DEVTOOLS_USE__,Br=Kt?window.__SWR_DEVTOOLS_USE__:[],Gr=()=>{Kt&&(window.__SWR_DEVTOOLS_REACT__=Fe.default)},Hr=e=>B(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],Kr=()=>q(je,(0,Fe.useContext)(Ie));var Jr=e=>(t,r,n)=>e(t,r&&((...o)=>{let[s]=ve(t),[,,,i]=J.get(Ve);if(s.startsWith(Ht))return r(...o);let c=i[s];return y(c)?r(...o):(delete i[s],c)}),n),qr=Br.concat(Jr),Jt=e=>function(...r){let n=Kr(),[a,o,s]=Hr(r),i=ft(n,s),c=e,{use:g}=i,d=(g||[]).concat(qr);for(let h=d.length;h--;)c=d[h](c);return c(a,o||i.fetcher||null,i)},qt=(e,t,r)=>{let n=t[e]||(t[e]=[]);return n.push(r),()=>{let a=n.indexOf(r);a>=0&&(n[a]=n[n.length-1],n.pop())}};Gr();var Zr=()=>{},Nn=Zr();var ht=U.default.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),pt={dedupe:!0},Yr=(e,t,r)=>{let{cache:n,compare:a,suspense:o,fallbackData:s,revalidateOnMount:i,revalidateIfStale:c,refreshInterval:g,refreshWhenHidden:d,refreshWhenOffline:h,keepPreviousData:v}=r,[f,p,u,E]=J.get(n),[l,D]=ve(e),R=(0,U.useRef)(!1),$=(0,U.useRef)(!1),x=(0,U.useRef)(l),C=(0,U.useRef)(t),O=(0,U.useRef)(r),k=()=>O.current,G=()=>k().isVisible()&&k().isOnline(),[F,N,I,M]=Ue(n,l),_=(0,U.useRef)({}).current,b=y(s)?y(r.fallback)?P:r.fallback[l]:s,Z=(T,S)=>{for(let j in _){let A=j;if(A==="data"){if(!a(T[A],S[A])&&(!y(T[A])||!a(Se,S[A])))return!1}else if(S[A]!==T[A])return!1}return!0},ke=(0,U.useMemo)(()=>{let T=!l||!t?!1:y(i)?k().isPaused()||o?!1:c!==!1:i,S=W=>{let X=q(W);return delete X._k,T?{isValidating:!0,isLoading:!0,...X}:X},j=F(),A=M(),K=S(j),fe=j===A?K:S(A),L=K;return[()=>{let W=S(F());return Z(W,L)?(L.data=W.data,L.isLoading=W.isLoading,L.isValidating=W.isValidating,L.error=W.error,L):(L=W,W)},()=>fe]},[n,l]),ne=(0,Zt.useSyncExternalStore)((0,U.useCallback)(T=>I(l,(S,j)=>{Z(j,S)||T()}),[n,l]),ke[0],ke[1]),yt=!R.current,mr=f[l]&&f[l].length>0,ue=ne.data,oe=y(ue)?b&&Pe(b)?ht(b):b:ue,xe=ne.error,Ke=(0,U.useRef)(oe),Se=v?y(ue)?y(Ke.current)?oe:Ke.current:ue:oe,$t=mr&&!y(xe)?!1:yt&&!y(i)?i:k().isPaused()?!1:o?y(oe)?!1:c:y(oe)||c,wt=!!(l&&t&&yt&&$t),gr=y(ne.isValidating)?wt:ne.isValidating,br=y(ne.isLoading)?wt:ne.isLoading,$e=(0,U.useCallback)(async T=>{let S=C.current;if(!l||!S||$.current||k().isPaused())return!1;let j,A,K=!0,fe=T||{},L=!u[l]||!fe.dedupe,W=()=>De?!$.current&&l===x.current&&R.current:l===x.current,X={isValidating:!1,isLoading:!1},Et=()=>{N(X)},kt=()=>{let H=u[l];H&&H[1]===A&&delete u[l]},xt={isValidating:!0};y(F().data)&&(xt.isLoading=!0);try{if(L&&(N(xt),r.loadingTimeout&&y(F().data)&&setTimeout(()=>{K&&W()&&k().onLoadingSlow(l,r)},r.loadingTimeout),u[l]=[S(D),we()]),[j,A]=u[l],j=await j,L&&setTimeout(kt,r.dedupingInterval),!u[l]||u[l][1]!==A)return L&&W()&&k().onDiscarded(l),!1;X.error=P;let H=p[l];if(!y(H)&&(A<=H[0]||A<=H[1]||H[1]===0))return Et(),L&&W()&&k().onDiscarded(l),!1;let Q=F().data;X.data=a(Q,j)?Q:j,L&&W()&&k().onSuccess(j,l,r)}catch(H){kt();let Q=k(),{shouldRetryOnError:Je}=Q;Q.isPaused()||(X.error=H,L&&W()&&(Q.onError(H,l,Q),(Je===!0||B(Je)&&Je(H))&&(!k().revalidateOnFocus||!k().revalidateOnReconnect||G())&&Q.onErrorRetry(H,l,Q,yr=>{let qe=f[l];qe&&qe[0]&&qe[0](se.ERROR_REVALIDATE_EVENT,yr)},{retryCount:(fe.retryCount||0)+1,dedupe:!0})))}return K=!1,Et(),!0},[l,n]),vt=(0,U.useCallback)((...T)=>Le(n,x.current,...T),[]);if(ge(()=>{C.current=t,O.current=r,y(ue)||(Ke.current=ue)}),ge(()=>{if(!l)return;let T=$e.bind(P,pt),S=0;k().revalidateOnFocus&&(S=Date.now()+k().focusThrottleInterval);let A=qt(l,f,(K,fe={})=>{if(K==se.FOCUS_EVENT){let L=Date.now();k().revalidateOnFocus&&L>S&&G()&&(S=L+k().focusThrottleInterval,T())}else if(K==se.RECONNECT_EVENT)k().revalidateOnReconnect&&G()&&T();else{if(K==se.MUTATE_EVENT)return $e();if(K==se.ERROR_REVALIDATE_EVENT)return $e(fe)}});return $.current=!1,x.current=l,R.current=!0,N({_k:D}),$t&&(u[l]||(y(oe)||ce?T():lt(T))),()=>{$.current=!0,A()}},[l]),ge(()=>{let T;function S(){let A=B(g)?g(F().data):g;A&&T!==-1&&(T=setTimeout(j,A))}function j(){!F().error&&(d||k().isVisible())&&(h||k().isOnline())?$e(pt).then(S):S()}return S(),()=>{T&&(clearTimeout(T),T=-1)}},[g,d,h,l]),(0,U.useDebugValue)(Se),o&&y(oe)&&l){if(!De&&ce)throw new Error("Fallback data is required when using Suspense in SSR.");C.current=t,O.current=r,$.current=!1;let T=E[l];if(!y(T)){let S=vt(T);ht(S)}if(y(xe)){let S=$e(pt);y(Se)||(S.status="fulfilled",S.value=!0),ht(S)}else throw xe}return{mutate:vt,get data(){return _.data=!0,Se},get error(){return _.error=!0,xe},get isValidating(){return _.isValidating=!0,gr},get isLoading(){return _.isLoading=!0,br}}},Wn=pe.defineProperty(dt,"defaultValue",{value:je}),Yt=Jt(Yr);var Xr=(e,t)=>{let{data:r,mutate:n}=Yt(e,{fallbackData:t});return[r,n]},Ne=Xr;var Qr=()=>{let[e,t]=Ne("user"),[r,n]=Ne("teams"),[a,o]=Ne("selectedTeamId");return(0,Xt.useEffect)(()=>{(async()=>{if(!e||!r){let c=await We.LocalStorage.getItem("selectedTeamId");c&&o(c);let[g,d]=await Promise.all([Re(),_t()]);t(g),n(d),c&&(d.find(v=>v.id===c)||o(void 0))}})()},[]),{user:e,selectedTeam:a,teams:r,updateSelectedTeam:async i=>{let c=r?.find(g=>g.id===i);c?(o(c.id),await We.LocalStorage.setItem("selectedTeamId",c.id)):(o(void 0),await We.LocalStorage.removeItem("selectedTeamId"))}}},Me=Qr;var Ee=require("react/jsx-runtime"),en=({onTeamChange:e})=>{let{selectedTeam:t,teams:r,updateSelectedTeam:n}=Me(),a=async s=>{s&&(await n(s),e())},o=r?.find(s=>s.id===t);return(0,Ee.jsxs)(ze.List.Dropdown,{value:t,tooltip:"Switch Team",onChange:async s=>await a(s),children:[o&&(0,Ee.jsx)(ze.List.Dropdown.Item,{title:o.name,value:o.id,icon:mt.Icon.TwoPeople}),r?.length&&r.filter(s=>s.id!==t).map(s=>(0,Ee.jsx)(ze.List.Dropdown.Item,{title:s.name,value:s.id,icon:mt.Icon.TwoPeople},s.id))]})},Qt=en;var m=ae(require("react")),w=require("@raycast/api");var le=ae(require("node:fs")),Ge=ae(require("node:path")),nr=ae(require("node:crypto"));var ar=require("react/jsx-runtime");var sr=require("node:url");function tn(e){let t=(0,m.useRef)(e),r=(0,m.useRef)(0);return he(e,t.current)||(t.current=e,r.current+=1),(0,m.useMemo)(()=>t.current,[r.current])}function z(e){let t=(0,m.useRef)(e);return t.current=e,t}function rn(e,t){let r=e instanceof Error?e.message:String(e);return(0,w.showToast)({style:w.Toast.Style.Failure,title:t?.title??"Something went wrong",message:t?.message??r,primaryAction:t?.primaryAction??er(e),secondaryAction:t?.primaryAction?er(e):void 0})}var er=e=>{let t=!0,r="[Extension Name]...",n="";try{let s=JSON.parse((0,le.readFileSync)((0,Ge.join)(w.environment.assetsPath,"..","package.json"),"utf8"));r=`[${s.title}]...`,n=`https://raycast.com/${s.owner||s.author}/${s.name}`,(!s.owner||s.access==="public")&&(t=!1)}catch{}let a=w.environment.isDevelopment||t,o=e instanceof Error?e?.stack||e?.message||"":String(e);return{title:a?"Copy Logs":"Report Error",onAction(s){s.hide(),a?w.Clipboard.copy(o):(0,w.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(r)}&extension-url=${encodeURI(n)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${o}
\`\`\`
`)}`)}}};function gt(e,t,r){let n=(0,m.useRef)(0),[a,o]=(0,m.useState)({isLoading:!0}),s=z(e),i=z(r?.abortable),c=z(t||[]),g=z(r?.onError),d=z(r?.onData),h=z(r?.onWillExecute),v=z(r?.failureToastOptions),f=z(a.data),p=(0,m.useRef)(null),u=(0,m.useRef)({page:0}),E=(0,m.useRef)(!1),l=(0,m.useRef)(!0),D=(0,m.useRef)(50),R=(0,m.useCallback)(()=>(i.current&&(i.current.current?.abort(),i.current.current=new AbortController),++n.current),[i]),$=(0,m.useCallback)((...N)=>{let I=R();h.current?.(N),o(b=>({...b,isLoading:!0}));let M=nn(s.current)(...N);function _(b){return b.name=="AbortError"||I===n.current&&(g.current?g.current(b):w.environment.launchType!==w.LaunchType.Background&&rn(b,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(Z){Z.hide(),p.current?.(...c.current||[])}},...v.current}),o({error:b,isLoading:!1})),b}return typeof M=="function"?(E.current=!0,M(u.current).then(({data:b,hasMore:Z,cursor:ke})=>(I===n.current&&(u.current&&(u.current.cursor=ke,u.current.lastItem=b?.[b.length-1]),d.current&&d.current(b,u.current),Z&&(D.current=b.length),l.current=Z,o(ne=>u.current.page===0?{data:b,isLoading:!1}:{data:(ne.data||[])?.concat(b),isLoading:!1})),b),b=>(l.current=!1,_(b)))):(E.current=!1,M.then(b=>(I===n.current&&(d.current&&d.current(b),o({data:b,isLoading:!1})),b),_))},[d,g,c,s,o,p,h,u,v,R]);p.current=$;let x=(0,m.useCallback)(()=>{u.current={page:0};let N=c.current||[];return $(...N)},[$,c]),C=(0,m.useCallback)(async(N,I)=>{let M;try{if(I?.optimisticUpdate){R(),typeof I?.rollbackOnError!="function"&&I?.rollbackOnError!==!1&&(M=structuredClone(f.current?.value));let _=I.optimisticUpdate;o(b=>({...b,data:_(b.data)}))}return await N}catch(_){if(typeof I?.rollbackOnError=="function"){let b=I.rollbackOnError;o(Z=>({...Z,data:b(Z.data)}))}else I?.optimisticUpdate&&I?.rollbackOnError!==!1&&o(b=>({...b,data:M}));throw _}finally{I?.shouldRevalidateAfter!==!1&&(w.environment.launchType===w.LaunchType.Background||w.environment.commandMode==="menu-bar"?await x():x())}},[x,f,o,R]),O=(0,m.useCallback)(()=>{u.current.page+=1;let N=c.current||[];$(...N)},[u,c,$]);(0,m.useEffect)(()=>{u.current={page:0},r?.execute!==!1?$(...t||[]):R()},[tn([t,r?.execute,$]),i,u]),(0,m.useEffect)(()=>()=>{R()},[R]);let k=r?.execute!==!1?a.isLoading:!1,G={...a,isLoading:k},F=E.current?{pageSize:D.current,hasMore:l.current,onLoadMore:O}:void 0;return{...G,revalidate:x,mutate:C,pagination:F}}function nn(e){return e===Promise.all||e===Promise.race||e===Promise.resolve||e===Promise.reject?e.bind(Promise):e}function tr(e){return typeof e!="function"?!1:/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))!==null}function an(e){return e instanceof URLSearchParams?e.toString():e}function or(e,t=[]){function r(n){return"update"in e?e.update(n,"utf8"):e.write(n)}return{dispatch:function(n){n=an(n),n===null?this._null():this["_"+typeof n](n)},_object:function(n){let a=/\[object (.*)\]/i,o=Object.prototype.toString.call(n),s=a.exec(o)?.[1]??"unknown:["+o+"]";s=s.toLowerCase();let i=null;if((i=t.indexOf(n))>=0){this.dispatch("[CIRCULAR:"+i+"]");return}else t.push(n);if(Buffer.isBuffer(n))return r("buffer:"),r(n.toString("utf8"));if(s!=="object"&&s!=="function"&&s!=="asyncfunction")if(this["_"+s])this["_"+s](n);else throw new Error('Unknown object type "'+s+'"');else{let c=Object.keys(n);c=c.sort(),tr(n)||c.splice(0,0,"prototype","__proto__","constructor"),r("object:"+c.length+":");let g=this;return c.forEach(function(d){g.dispatch(d),r(":"),g.dispatch(n[d]),r(",")})}},_array:function(n,a){a=typeof a<"u"?a:!1;let o=this;if(r("array:"+n.length+":"),!a||n.length<=1){n.forEach(function(c){o.dispatch(c)});return}let s=[],i=n.map(function(c){let g=sn(),d=t.slice();return or(g,d).dispatch(c),s=s.concat(d.slice(t.length)),g.read().toString()});t=t.concat(s),i.sort(),this._array(i,!1)},_date:function(n){r("date:"+n.toJSON())},_symbol:function(n){r("symbol:"+n.toString())},_error:function(n){r("error:"+n.toString())},_boolean:function(n){r("bool:"+n.toString())},_string:function(n){r("string:"+n.length+":"),r(n.toString())},_function:function(n){r("fn:"),tr(n)?this.dispatch("[native]"):this.dispatch(n.toString()),this.dispatch("function-name:"+String(n.name)),this._object(n)},_number:function(n){r("number:"+n.toString())},_xml:function(n){r("xml:"+n.toString())},_null:function(){r("Null")},_undefined:function(){r("Undefined")},_regexp:function(n){r("regex:"+n.toString())},_uint8array:function(n){r("uint8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint8clampedarray:function(n){r("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(n))},_int8array:function(n){r("int8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint16array:function(n){r("uint16array:"),this.dispatch(Array.prototype.slice.call(n))},_int16array:function(n){r("int16array:"),this.dispatch(Array.prototype.slice.call(n))},_uint32array:function(n){r("uint32array:"),this.dispatch(Array.prototype.slice.call(n))},_int32array:function(n){r("int32array:"),this.dispatch(Array.prototype.slice.call(n))},_float32array:function(n){r("float32array:"),this.dispatch(Array.prototype.slice.call(n))},_float64array:function(n){r("float64array:"),this.dispatch(Array.prototype.slice.call(n))},_arraybuffer:function(n){r("arraybuffer:"),this.dispatch(new Uint8Array(n))},_url:function(n){r("url:"+n.toString())},_map:function(n){r("map:");let a=Array.from(n);this._array(a,!0)},_set:function(n){r("set:");let a=Array.from(n);this._array(a,!0)},_file:function(n){r("file:"),this.dispatch([n.name,n.size,n.type,n.lastModified])},_blob:function(){throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){r("domwindow")},_bigint:function(n){r("bigint:"+n.toString())},_process:function(){r("process")},_timer:function(){r("timer")},_pipe:function(){r("pipe")},_tcp:function(){r("tcp")},_udp:function(){r("udp")},_tty:function(){r("tty")},_statwatcher:function(){r("statwatcher")},_securecontext:function(){r("securecontext")},_connection:function(){r("connection")},_zlib:function(){r("zlib")},_context:function(){r("context")},_nodescript:function(){r("nodescript")},_httpparser:function(){r("httpparser")},_dataview:function(){r("dataview")},_signal:function(){r("signal")},_fsevent:function(){r("fsevent")},_tlswrap:function(){r("tlswrap")}}}function sn(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}function on(e,t){let r=this[e];return r instanceof Date?`__raycast_cached_date__${r.toString()}`:Buffer.isBuffer(r)?`__raycast_cached_buffer__${r.toString("base64")}`:t}function cn(e,t){return typeof t=="string"&&t.startsWith("__raycast_cached_date__")?new Date(t.replace("__raycast_cached_date__","")):typeof t=="string"&&t.startsWith("__raycast_cached_buffer__")?Buffer.from(t.replace("__raycast_cached_buffer__",""),"base64"):t}function Be(e){let t=nr.default.createHash("sha1");return or(t).dispatch(e),t.digest("hex")}var ln=Symbol("cache without namespace"),rr=new Map;function un(e,t,r){let n=r?.cacheNamespace||ln,a=rr.get(n)||rr.set(n,new w.Cache({namespace:r?.cacheNamespace})).get(n);if(!a)throw new Error("Missing cache");let o=z(e),s=z(t),i=(0,m.useSyncExternalStore)(a.subscribe,()=>{try{return a.get(o.current)}catch(h){console.error("Could not get Cache data:",h);return}}),c=(0,m.useMemo)(()=>{if(typeof i<"u"){if(i==="undefined")return;try{return JSON.parse(i,cn)}catch(h){return console.warn("The cached data is corrupted",h),s.current}}else return s.current},[i,s]),g=z(c),d=(0,m.useCallback)(h=>{let v=typeof h=="function"?h(g.current):h;if(typeof v>"u")a.set(o.current,"undefined");else{let f=JSON.stringify(v,on);a.set(o.current,f)}return v},[a,o,g]);return[c,d]}var be=Symbol();function fn(e,t,r){let{initialData:n,keepPreviousData:a,internal_cacheKeySuffix:o,...s}=r||{},i=(0,m.useRef)(null),[c,g]=un(Be(t||[])+o,be,{cacheNamespace:Be(e)}),d=(0,m.useRef)(c!==be?c:n),h=(0,m.useRef)(void 0),{mutate:v,revalidate:f,...p}=gt(e,t||[],{...s,onData(R,$){h.current=$,s.onData&&s.onData(R,$),!($&&$.page>0)&&(i.current="promise",d.current=R,g(R))}}),u,E=p.pagination;h.current&&h.current.page>0&&p.data?u=p.data:i.current==="promise"?u=d.current:a&&c!==be?(u=c,E&&(E.hasMore=!0,E.pageSize=c.length)):a&&c===be?u=d.current:c!==be?(u=c,E&&(E.hasMore=!0,E.pageSize=c.length)):u=n;let l=z(u),D=(0,m.useCallback)(async(R,$)=>{let x;try{if($?.optimisticUpdate){typeof $?.rollbackOnError!="function"&&$?.rollbackOnError!==!1&&(x=structuredClone(l.current));let C=$.optimisticUpdate(l.current);i.current="cache",d.current=C,g(C)}return await v(R,{shouldRevalidateAfter:$?.shouldRevalidateAfter})}catch(C){if(typeof $?.rollbackOnError=="function"){let O=$.rollbackOnError(l.current);i.current="cache",d.current=O,g(O)}else $?.optimisticUpdate&&$?.rollbackOnError!==!1&&(i.current="cache",d.current=x,g(x));throw C}},[g,v,l,d,i]);return(0,m.useEffect)(()=>{c!==be&&(i.current="cache",d.current=c)},[c]),{data:u,isLoading:p.isLoading,error:p.error,mutate:h.current&&h.current.page>0?v:D,pagination:E,revalidate:f}}function dn(e){if(e){let t=pn(e);if(!t)return!1;if(t.subtype==="json"||t.suffix==="json"||t.suffix&&/\bjson\b/i.test(t.suffix)||t.subtype&&/\bjson\b/i.test(t.subtype))return!0}return!1}var hn=/^([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126});?$/;function pn(e){let t=e.indexOf(";"),r=t!==-1?e.slice(0,t).trim():e.trim(),n=hn.exec(r.toLowerCase().toLowerCase());if(!n)return;let a=n[1],o=n[2],s,i=o.lastIndexOf("+");return i!==-1&&(s=o.substring(i+1),o=o.substring(0,i)),{type:a,subtype:o,suffix:s}}async function mn(e){if(!e.ok)throw new Error(e.statusText);let t=e.headers.get("content-type");return t&&dn(t)?await e.json():await e.text()}function gn(e){return{data:e,hasMore:!1}}function ir(e,t){let{parseResponse:r,mapResult:n,initialData:a,execute:o,keepPreviousData:s,onError:i,onData:c,onWillExecute:g,failureToastOptions:d,...h}=t||{},v={initialData:a,execute:o,keepPreviousData:s,onError:i,onData:c,onWillExecute:g,failureToastOptions:d},f=z(r||mn),p=z(n||gn),u=(0,m.useRef)(null),E=(0,m.useRef)(null),l=typeof e=="function"?e({page:0}):void 0;(!u.current||typeof E.current>"u"||E.current!==l)&&(u.current=e),E.current=l;let D=(0,m.useRef)(null),R=(0,m.useCallback)((C,O)=>async k=>{let G=await fetch(C(k),{signal:D.current?.signal,...O}),F=await f.current(G);return p.current?.(F)},[f,p]),$=(0,m.useCallback)(async(C,O)=>{let k=await fetch(C,{signal:D.current?.signal,...O}),G=await f.current(k);return p.current(G)?.data},[f,p]),x=(0,m.useMemo)(()=>E.current?R:$,[E,$,R]);return fn(x,[u.current,h],{...v,internal_cacheKeySuffix:E.current+Be(p.current)+Be(f.current),abortable:D})}function cr(e,t){let r=n=>n.startsWith("http")?n:`https://${n}`;try{let n=i=>i.startsWith("http")?i:`https://${i}`,o=(typeof e=="string"?new sr.URL(n(e)):e).hostname;switch(process.env.FAVICON_PROVIDER??"raycast"){case"none":return{source:t?.fallback??w.Icon.Link,mask:t?.mask};case"apple":return{source:t?.fallback??w.Icon.Link,mask:t?.mask};case"duckduckgo":case"duckDuckGo":return{source:`https://icons.duckduckgo.com/ip3/${o}.ico`,fallback:t?.fallback??w.Icon.Link,mask:t?.mask};case"google":return{source:`https://www.google.com/s2/favicons?sz=${t?.size??64}&domain=${o}`,fallback:t?.fallback??w.Icon.Link,mask:t?.mask};case"legacy":case"raycast":default:return{source:`https://api.ray.so/favicon?url=${o}&size=${t?.size??64}`,fallback:t?.fallback??w.Icon.Link,mask:t?.mask}}}catch(n){return console.error(n),w.Icon.Link}}var te=require("react/jsx-runtime"),bn=()=>{let{selectedTeam:e,user:t}=Me(),r=At(e),{isLoading:n,data:a,revalidate:o}=ir(r,{headers:Rt,mapResult(i){return{data:i.domains}},initialData:[]});return(0,te.jsx)(re.List,{searchBarPlaceholder:"Search Domains...",navigationTitle:"Results",isLoading:n,searchBarAccessory:(0,te.jsx)(te.Fragment,{children:t&&(0,te.jsx)(Qt,{onTeamChange:()=>{o()}})}),children:a.map(i=>(0,te.jsx)(re.List.Item,{id:i.id,icon:cr(`https://${i.name}`,{fallback:re.Icon.Dot}),title:i.name,subtitle:i.serviceType==="external"?"Third Party":i.serviceType,actions:(0,te.jsx)(re.ActionPanel,{children:(0,te.jsx)(re.Action.OpenInBrowser,{title:`Visit ${i.name}`,url:`https://${i.name}`})}),accessories:[{date:new Date(i.createdAt)}]},i.id))})},lr=bn;var ur=require("@raycast/api");var yn=async()=>{if((0,ur.getPreferenceValues)().accessToken.length!==24)throw new Error("Invalid token length. Expected 24 characters.");if(!await Re())throw new Error("Failed to fetch user data. Token may be invalid.");return!0},fr=yn;var Y=require("@raycast/api"),He=require("react/jsx-runtime"),$n=()=>(0,He.jsx)(Y.Detail,{markdown:`# ERROR 

 Invalid token detected. Please set one in the settings.`,actions:(0,He.jsx)(Y.ActionPanel,{children:(0,He.jsx)(Y.Action,{icon:Y.Icon.Gear,title:"Open Extension Preferences",onAction:Y.openExtensionPreferences})})}),dr=$n;var hr=require("@raycast/api"),ye=require("react/jsx-runtime"),wn=({children:e})=>{let{isLoading:t,error:r}=gt(fr,[],{failureToastOptions:{title:"Invalid token detected. Please set one in the settings."}});return t?(0,ye.jsx)(hr.Detail,{isLoading:!0}):r?(0,ye.jsx)(dr,{}):(0,ye.jsx)(ye.Fragment,{children:e})},pr=wn;var bt=require("react/jsx-runtime");function vn(){return(0,bt.jsx)(pr,{children:(0,bt.jsx)(lr,{})})}var En=vn;
/*! Bundled license information:

use-sync-external-store/cjs/use-sync-external-store-shim.production.js:
  (**
   * @license React
   * use-sync-external-store-shim.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

use-sync-external-store/cjs/use-sync-external-store-shim.development.js:
  (**
   * @license React
   * use-sync-external-store-shim.development.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
