"use strict";var Tr=Object.create;var Ce=Object.defineProperty;var Cr=Object.getOwnPropertyDescriptor;var Ar=Object.getOwnPropertyNames;var _r=Object.getPrototypeOf,Ir=Object.prototype.hasOwnProperty;var st=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),Dt=(e,r)=>{for(var t in r)Ce(e,t,{get:r[t],enumerable:!0})},Ot=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of Ar(r))!Ir.call(e,a)&&a!==t&&Ce(e,a,{get:()=>r[a],enumerable:!(n=Cr(r,a))||n.enumerable});return e};var oe=(e,r,t)=>(t=e!=null?Tr(_r(e)):{},Ot(r||!e||!e.__esModule?Ce(t,"default",{value:e,enumerable:!0}):t,e)),Dr=e=>Ot(Ce({},"__esModule",{value:!0}),e);var jt=st(Vt=>{"use strict";var me=require("react");function Ur(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var Lr=typeof Object.is=="function"?Object.is:Ur,Nr=me.useState,Vr=me.useEffect,jr=me.useLayoutEffect,Fr=me.useDebugValue;function Mr(e,r){var t=r(),n=Nr({inst:{value:t,getSnapshot:r}}),a=n[0].inst,o=n[1];return jr(function(){a.value=t,a.getSnapshot=r,ot(a)&&o({inst:a})},[e,t,r]),Vr(function(){return ot(a)&&o({inst:a}),e(function(){ot(a)&&o({inst:a})})},[e]),Fr(t),t}function ot(e){var r=e.getSnapshot;e=e.value;try{var t=r();return!Lr(e,t)}catch{return!0}}function Wr(e,r){return r()}var zr=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Wr:Mr;Vt.useSyncExternalStore=me.useSyncExternalStore!==void 0?me.useSyncExternalStore:zr});var Mt=st(Ft=>{"use strict";process.env.NODE_ENV!=="production"&&(function(){function e(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}function r(d,f){l||a.startTransition===void 0||(l=!0,console.error("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var h=f();if(!m){var k=f();o(h,k)||(console.error("The result of getSnapshot should be cached to avoid an infinite loop"),m=!0)}k=s({inst:{value:h,getSnapshot:f}});var u=k[0].inst,V=k[1];return i(function(){u.value=h,u.getSnapshot=f,t(u)&&V({inst:u})},[d,h,f]),c(function(){return t(u)&&V({inst:u}),d(function(){t(u)&&V({inst:u})})},[d]),p(h),h}function t(d){var f=d.getSnapshot;d=d.value;try{var h=f();return!o(d,h)}catch{return!0}}function n(d,f){return f()}typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());var a=require("react"),o=typeof Object.is=="function"?Object.is:e,s=a.useState,c=a.useEffect,i=a.useLayoutEffect,p=a.useDebugValue,l=!1,m=!1,b=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?n:r;Ft.useSyncExternalStore=a.useSyncExternalStore!==void 0?a.useSyncExternalStore:b,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error())})()});var Wt=st((Bn,it)=>{"use strict";process.env.NODE_ENV==="production"?it.exports=jt():it.exports=Mt()});var Vn={};Dt(Vn,{default:()=>Nn});module.exports=Dr(Vn);var v=require("@raycast/api");var or=require("react"),Ke=require("@raycast/api");var ie=require("@raycast/api"),Or=(0,ie.getPreferenceValues)().accessToken,Ae={Authorization:"Bearer "+Or},_e=Object.entries(Ae),Ie="https://api.vercel.com/";async function De(){try{return(await(await fetch(Ie+"www/user",{method:"get",headers:Ae})).json()).user}catch(e){throw console.error(e),(0,ie.showToast)({style:ie.Toast.Style.Failure,title:"Failed to fetch user info"}),new Error("Failed to fetch user info")}}async function Pt(){let r=await(await fetch(Ie+"v1/teams",{method:"get",headers:Ae})).json(),t=[];for(let n of r.teams)t.push(n);return t}function Ut(e,r,t=100){let n=Ie+"v6/deployments",a=`?limit=${t}&teamId=${e??""}`;return r&&(a+=`&projectId=${r}`),n+a}function Lt(e,r,t=100){return Ie+`v11/deployments/${e}/builds?limit=${t}&teamId=${r??""}`}function Pr(e){let r="";return[].slice.call(new Uint8Array(e)).forEach(n=>r+=String.fromCharCode(n)),btoa(r)}async function Nt(e,r){try{let t=ie.environment.appearance==="light"?"0":"1",n=await fetch(`https://vercel.com/api/screenshot?dark=${t}&deploymentId=${e}&withStatus=false&teamId=${r??""}`,{method:"get",headers:Ae});if(n.status!==200)return null;let a=await n.arrayBuffer();return"data:image/png;base64,"+Pr(a)}catch(t){return console.error(t),null}}function Oe(e,r,t){return t.startsWith("dpl_")&&(t=t.substring(4)),`https://vercel.com/${e}/${r}/${t}`}var L=oe(require("react"),1),ar=oe(Wt(),1);var F=oe(require("react"),1);var ce={};Dt(ce,{ERROR_REVALIDATE_EVENT:()=>Br,FOCUS_EVENT:()=>zt,MUTATE_EVENT:()=>Gt,RECONNECT_EVENT:()=>Bt});var zt=0,Bt=1,Gt=2,Br=3;var Ht=Object.prototype.hasOwnProperty;function pe(e,r){var t,n;if(e===r)return!0;if(e&&r&&(t=e.constructor)===r.constructor){if(t===Date)return e.getTime()===r.getTime();if(t===RegExp)return e.toString()===r.toString();if(t===Array){if((n=e.length)===r.length)for(;n--&&pe(e[n],r[n]););return n===-1}if(!t||typeof e=="object"){n=0;for(t in e)if(Ht.call(e,t)&&++n&&!Ht.call(r,t)||!(t in r)||!pe(e[t],r[t]))return!1;return Object.keys(r).length===n}}return e!==e&&r!==r}var X=new WeakMap,ae=()=>{},U=ae(),ge=Object,$=e=>e===U,J=e=>typeof e=="function",Q=(e,r)=>({...e,...r}),je=e=>J(e.then),ct={},Pe={},pt="undefined",be=typeof window!=pt,Le=typeof document!=pt,Jt=be&&"Deno"in window,qt=()=>be&&typeof window.requestAnimationFrame!=pt,Fe=(e,r)=>{let t=X.get(e);return[()=>!$(r)&&e.get(r)||ct,n=>{if(!$(r)){let a=e.get(r);r in Pe||(Pe[r]=a),t[5](r,Q(a,n),a||ct)}},t[6],()=>!$(r)&&r in Pe?Pe[r]:!$(r)&&e.get(r)||ct]},ft=!0,Gr=()=>ft,[dt,ht]=be&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[ae,ae],Hr=()=>{let e=Le&&document.visibilityState;return $(e)||e!=="hidden"},Kr=e=>(Le&&document.addEventListener("visibilitychange",e),dt("focus",e),()=>{Le&&document.removeEventListener("visibilitychange",e),ht("focus",e)}),Jr=e=>{let r=()=>{ft=!0,e()},t=()=>{ft=!1};return dt("online",r),dt("offline",t),()=>{ht("online",r),ht("offline",t)}},Zt={isOnline:Gr,isVisible:Hr},Yt={initFocus:Kr,initReconnect:Jr},Me=!F.default.useId,ue=!be||Jt,gt=e=>qt()?window.requestAnimationFrame(e):setTimeout(e,1),ye=ue?F.useEffect:F.useLayoutEffect,lt=typeof navigator<"u"&&navigator.connection,mt=!ue&&lt&&(["slow-2g","2g"].includes(lt.effectiveType)||lt.saveData),Ue=new WeakMap,qr=e=>ge.prototype.toString.call(e),ut=(e,r)=>e===`[object ${r}]`,Zr=0,Ne=e=>{let r=typeof e,t=qr(e),n=ut(t,"Date"),a=ut(t,"RegExp"),o=ut(t,"Object"),s,c;if(ge(e)===e&&!n&&!a){if(s=Ue.get(e),s)return s;if(s=++Zr+"~",Ue.set(e,s),Array.isArray(e)){for(s="@",c=0;c<e.length;c++)s+=Ne(e[c])+",";Ue.set(e,s)}if(o){s="#";let i=ge.keys(e).sort();for(;!$(c=i.pop());)$(e[c])||(s+=c+":"+Ne(e[c])+",");Ue.set(e,s)}}else s=n?e.toJSON():r=="symbol"?e.toString():r=="string"?JSON.stringify(e):""+e;return s},Ee=e=>{if(J(e))try{e=e()}catch{e=""}let r=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?Ne(e):"",[e,r]},Yr=0,ke=()=>++Yr;async function We(...e){let[r,t,n,a]=e,o=Q({populateCache:!0,throwOnError:!0},typeof a=="boolean"?{revalidate:a}:a||{}),s=o.populateCache,c=o.rollbackOnError,i=o.optimisticData,p=b=>typeof c=="function"?c(b):c!==!1,l=o.throwOnError;if(J(t)){let b=t,d=[],f=r.keys();for(let h of f)!/^\$(inf|sub)\$/.test(h)&&b(r.get(h)._k)&&d.push(h);return Promise.all(d.map(m))}return m(t);async function m(b){let[d]=Ee(b);if(!d)return;let[f,h]=Fe(r,d),[k,u,V,A]=X.get(r),w=()=>{let _=k[d];return(J(o.revalidate)?o.revalidate(f().data,b):o.revalidate!==!1)&&(delete V[d],delete A[d],_&&_[0])?_[0](2).then(()=>f().data):f().data};if(e.length<3)return w();let S=n,D,O=!1,E=ke();u[d]=[E,0];let q=!$(i),W=f(),z=W.data,P=W._c,G=$(P)?z:P;if(q&&(i=J(i)?i(G,z):i,h({data:i,_c:G})),J(S))try{S=S(G)}catch(_){D=_,O=!0}if(S&&je(S))if(S=await S.catch(_=>{D=_,O=!0}),E!==u[d][0]){if(O)throw D;return S}else O&&q&&p(D)&&(s=!0,h({data:G,_c:U}));if(s&&!O)if(J(s)){let _=s(S,G);h({data:_,error:U,_c:U})}else h({data:S,error:U,_c:U});if(u[d][1]=ke(),Promise.resolve(w()).then(()=>{h({_c:U})}),O){if(l)throw D;return}return S}}var Kt=(e,r)=>{for(let t in e)e[t][0]&&e[t][0](r)},bt=(e,r)=>{if(!X.has(e)){let t=Q(Yt,r),n=Object.create(null),a=We.bind(U,e),o=ae,s=Object.create(null),c=(l,m)=>{let b=s[l]||[];return s[l]=b,b.push(m),()=>b.splice(b.indexOf(m),1)},i=(l,m,b)=>{e.set(l,m);let d=s[l];if(d)for(let f of d)f(m,b)},p=()=>{if(!X.has(e)&&(X.set(e,[n,Object.create(null),Object.create(null),Object.create(null),a,i,c]),!ue)){let l=t.initFocus(setTimeout.bind(U,Kt.bind(U,n,0))),m=t.initReconnect(setTimeout.bind(U,Kt.bind(U,n,1)));o=()=>{l&&l(),m&&m(),X.delete(e)}}};return p(),[e,a,p,o]}return[e,X.get(e)[4]]},Xr=(e,r,t,n,a)=>{let o=t.errorRetryCount,s=a.retryCount,c=~~((Math.random()+.5)*(1<<(s<8?s:8)))*t.errorRetryInterval;!$(o)&&s>o||setTimeout(n,c,a)},Xt=pe,[ze,Qt]=bt(new Map),Be=Q({onLoadingSlow:ae,onSuccess:ae,onError:ae,onErrorRetry:Xr,onDiscarded:ae,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:mt?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:mt?5e3:3e3,compare:Xt,isPaused:()=>!1,cache:ze,mutate:Qt,fallback:{}},Zt),yt=(e,r)=>{let t=Q(e,r);if(r){let{use:n,fallback:a}=e,{use:o,fallback:s}=r;n&&o&&(t.use=n.concat(o)),a&&s&&(t.fallback=Q(a,s))}return t},Ve=(0,F.createContext)({}),$t=e=>{let{value:r}=e,t=(0,F.useContext)(Ve),n=J(r),a=(0,F.useMemo)(()=>n?r(t):r,[n,t,r]),o=(0,F.useMemo)(()=>n?a:yt(t,a),[n,t,a]),s=a&&a.provider,c=(0,F.useRef)(U);s&&!c.current&&(c.current=bt(s(o.cache||ze),a));let i=c.current;return i&&(o.cache=i[0],o.mutate=i[1]),ye(()=>{if(i)return i[2]&&i[2](),i[3]},[]),(0,F.createElement)(Ve.Provider,Q(e,{value:o}))};var er="$inf$";var Ge=oe(require("react"),1);var tr=be&&window.__SWR_DEVTOOLS_USE__,Qr=tr?window.__SWR_DEVTOOLS_USE__:[],en=()=>{tr&&(window.__SWR_DEVTOOLS_REACT__=Ge.default)},tn=e=>J(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],rn=()=>Q(Be,(0,Ge.useContext)(Ve));var nn=e=>(r,t,n)=>e(r,t&&((...o)=>{let[s]=Ee(r),[,,,c]=X.get(ze);if(s.startsWith(er))return t(...o);let i=c[s];return $(i)?t(...o):(delete c[s],i)}),n),an=Qr.concat(nn),rr=e=>function(...t){let n=rn(),[a,o,s]=tn(t),c=yt(n,s),i=e,{use:p}=c,l=(p||[]).concat(an);for(let m=l.length;m--;)i=l[m](i);return i(a,o||c.fetcher||null,c)},nr=(e,r,t)=>{let n=r[e]||(r[e]=[]);return n.push(t),()=>{let a=n.indexOf(t);a>=0&&(n[a]=n[n.length-1],n.pop())}};en();var sn=()=>{},ta=sn();var wt=L.default.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(r=>{e.status="fulfilled",e.value=r},r=>{e.status="rejected",e.reason=r}),e}}),vt={dedupe:!0},on=(e,r,t)=>{let{cache:n,compare:a,suspense:o,fallbackData:s,revalidateOnMount:c,revalidateIfStale:i,refreshInterval:p,refreshWhenHidden:l,refreshWhenOffline:m,keepPreviousData:b}=t,[d,f,h,k]=X.get(n),[u,V]=Ee(e),A=(0,L.useRef)(!1),w=(0,L.useRef)(!1),S=(0,L.useRef)(u),D=(0,L.useRef)(r),O=(0,L.useRef)(t),E=()=>O.current,q=()=>E().isVisible()&&E().isOnline(),[W,z,P,G]=Fe(n,u),_=(0,L.useRef)({}).current,y=$(s)?$(t.fallback)?U:t.fallback[u]:s,ee=(C,R)=>{for(let M in _){let I=M;if(I==="data"){if(!a(C[I],R[I])&&(!$(C[I])||!a(Te,R[I])))return!1}else if(R[I]!==C[I])return!1}return!0},Se=(0,L.useMemo)(()=>{let C=!u||!r?!1:$(c)?E().isPaused()||o?!1:i!==!1:c,R=B=>{let re=Q(B);return delete re._k,C?{isValidating:!0,isLoading:!0,...re}:re},M=W(),I=G(),Y=R(M),he=M===I?Y:R(I),j=Y;return[()=>{let B=R(W());return ee(B,j)?(j.data=B.data,j.isLoading=B.isLoading,j.isValidating=B.isValidating,j.error=B.error,j):(j=B,B)},()=>he]},[n,u]),se=(0,ar.useSyncExternalStore)((0,L.useCallback)(C=>P(u,(R,M)=>{ee(M,R)||C()}),[n,u]),Se[0],Se[1]),St=!A.current,Er=d[u]&&d[u].length>0,de=se.data,le=$(de)?y&&je(y)?wt(y):y:de,Re=se.error,rt=(0,L.useRef)(le),Te=b?$(de)?$(rt.current)?le:rt.current:de:le,Rt=Er&&!$(Re)?!1:St&&!$(c)?c:E().isPaused()?!1:o?$(le)?!1:i:$(le)||i,Tt=!!(u&&r&&St&&Rt),xr=$(se.isValidating)?Tt:se.isValidating,Sr=$(se.isLoading)?Tt:se.isLoading,ve=(0,L.useCallback)(async C=>{let R=D.current;if(!u||!R||w.current||E().isPaused())return!1;let M,I,Y=!0,he=C||{},j=!h[u]||!he.dedupe,B=()=>Me?!w.current&&u===S.current&&A.current:u===S.current,re={isValidating:!1,isLoading:!1},At=()=>{z(re)},_t=()=>{let Z=h[u];Z&&Z[1]===I&&delete h[u]},It={isValidating:!0};$(W().data)&&(It.isLoading=!0);try{if(j&&(z(It),t.loadingTimeout&&$(W().data)&&setTimeout(()=>{Y&&B()&&E().onLoadingSlow(u,t)},t.loadingTimeout),h[u]=[R(V),ke()]),[M,I]=h[u],M=await M,j&&setTimeout(_t,t.dedupingInterval),!h[u]||h[u][1]!==I)return j&&B()&&E().onDiscarded(u),!1;re.error=U;let Z=f[u];if(!$(Z)&&(I<=Z[0]||I<=Z[1]||Z[1]===0))return At(),j&&B()&&E().onDiscarded(u),!1;let ne=W().data;re.data=a(ne,M)?ne:M,j&&B()&&E().onSuccess(M,u,t)}catch(Z){_t();let ne=E(),{shouldRetryOnError:nt}=ne;ne.isPaused()||(re.error=Z,j&&B()&&(ne.onError(Z,u,ne),(nt===!0||J(nt)&&nt(Z))&&(!E().revalidateOnFocus||!E().revalidateOnReconnect||q())&&ne.onErrorRetry(Z,u,ne,Rr=>{let at=d[u];at&&at[0]&&at[0](ce.ERROR_REVALIDATE_EVENT,Rr)},{retryCount:(he.retryCount||0)+1,dedupe:!0})))}return Y=!1,At(),!0},[u,n]),Ct=(0,L.useCallback)((...C)=>We(n,S.current,...C),[]);if(ye(()=>{D.current=r,O.current=t,$(de)||(rt.current=de)}),ye(()=>{if(!u)return;let C=ve.bind(U,vt),R=0;E().revalidateOnFocus&&(R=Date.now()+E().focusThrottleInterval);let I=nr(u,d,(Y,he={})=>{if(Y==ce.FOCUS_EVENT){let j=Date.now();E().revalidateOnFocus&&j>R&&q()&&(R=j+E().focusThrottleInterval,C())}else if(Y==ce.RECONNECT_EVENT)E().revalidateOnReconnect&&q()&&C();else{if(Y==ce.MUTATE_EVENT)return ve();if(Y==ce.ERROR_REVALIDATE_EVENT)return ve(he)}});return w.current=!1,S.current=u,A.current=!0,z({_k:V}),Rt&&(h[u]||($(le)||ue?C():gt(C))),()=>{w.current=!0,I()}},[u]),ye(()=>{let C;function R(){let I=J(p)?p(W().data):p;I&&C!==-1&&(C=setTimeout(M,I))}function M(){!W().error&&(l||E().isVisible())&&(m||E().isOnline())?ve(vt).then(R):R()}return R(),()=>{C&&(clearTimeout(C),C=-1)}},[p,l,m,u]),(0,L.useDebugValue)(Te),o&&$(le)&&u){if(!Me&&ue)throw new Error("Fallback data is required when using Suspense in SSR.");D.current=r,O.current=t,w.current=!1;let C=k[u];if(!$(C)){let R=Ct(C);wt(R)}if($(Re)){let R=ve(vt);$(Te)||(R.status="fulfilled",R.value=!0),wt(R)}else throw Re}return{mutate:Ct,get data(){return _.data=!0,Te},get error(){return _.error=!0,Re},get isValidating(){return _.isValidating=!0,xr},get isLoading(){return _.isLoading=!0,Sr}}},ra=ge.defineProperty($t,"defaultValue",{value:Be}),sr=rr(on);var cn=(e,r)=>{let{data:t,mutate:n}=sr(e,{fallbackData:r});return[t,n]},He=cn;var ln=()=>{let[e,r]=He("user"),[t,n]=He("teams"),[a,o]=He("selectedTeamId");return(0,or.useEffect)(()=>{(async()=>{if(!e||!t){let i=await Ke.LocalStorage.getItem("selectedTeamId");i&&o(i);let[p,l]=await Promise.all([De(),Pt()]);r(p),n(l),i&&(l.find(b=>b.id===i)||o(void 0))}})()},[]),{user:e,selectedTeam:a,teams:t,updateSelectedTeam:async c=>{let i=t?.find(p=>p.id===c);i?(o(i.id),await Ke.LocalStorage.setItem("selectedTeamId",i.id)):(o(void 0),await Ke.LocalStorage.removeItem("selectedTeamId"))}}},Je=ln;var un=e=>{let r=new Intl.PluralRules("en-US",{type:"ordinal"}).select(e),t={one:"st",two:"nd",few:"rd",other:"th"}[r];return`${e}${t}`},fn=(e,r,t=void 0)=>{let n=()=>{throw new Error("getTimeSince requires 1-2 arguments, of type date or date-string")};(typeof e>"u"||isNaN(Number(e))||typeof r<"u"&&isNaN(Number(r)))&&n();let a=r===void 0||Math.abs(Number(r)-Number(new Date))<50,o=Number(new Date(e)),s=Number(r===void 0?new Date:new Date(r??null));(isNaN(o)||isNaN(s))&&n();let c=new Intl.RelativeTimeFormat("en",{localeMatcher:"best fit",style:"long",numeric:"auto"}),i=o-s;if(t&&!isNaN(t)&&Math.abs(i)>=Number(t)){let[p,l,m,b]=new Date(o).toLocaleString("en-us",{weekday:"short",month:"short",day:"numeric",year:"numeric"}).replace(/,/g,"").split(" ");return`${p} ${l} ${un(Number(m))}, ${b}`}if(Math.abs(i)<1e3)return a?"now":"simultaneously";for(let[p,l]of[["year",31536e6],["month",26784e5],["week",6048e5],["day",864e5],["hour",36e5],["minute",6e4],["second",1e3]])if(Math.abs(i)>=l){let{sign:m,floor:b,ceil:d}=Math,f=c.format((m(i)===1?b:d)(i/l),p);return a||(f=Math.sign(i)===1?f.replace("in ","")+" later":f.replace("ago","prior")),f}return"just now"},qe=fn;var T=require("@raycast/api"),Qe=require("react");var dn=async(e,r)=>{let t,n,a;t=`# ${e.name}
`,n=a="";let o=e.readyState||e.state,s=c=>`**${c}**`;switch(o){case"READY":{let c=await Nt(e.uid||e.id,r?.id);c?n+=`[![A screenshot of the deployment](${c})](https://${e.url})`:n+="No screenshot available";break}case"BUILDING":case"INITIALIZING":t+=s`Deployment is still building...`;break;case"FAILED":t+=s`Deployment failed.`;break;case"CANCELED":t+=s`Deployment was canceled.`;break;case"ERROR":{t+=s`Deployment had an error.`;break}default:t+=s`Deployment is in an unknown state...`}return`${t}

${n}

${a}`},ir=dn;var g=oe(require("react")),x=require("@raycast/api");var fe=oe(require("node:fs")),Ye=oe(require("node:path")),fr=oe(require("node:crypto"));var dr=require("react/jsx-runtime");function hn(e){let r=(0,g.useRef)(e),t=(0,g.useRef)(0);return pe(e,r.current)||(r.current=e,t.current+=1),(0,g.useMemo)(()=>r.current,[t.current])}function H(e){let r=(0,g.useRef)(e);return r.current=e,r}function mn(e,r){let t=e instanceof Error?e.message:String(e);return(0,x.showToast)({style:x.Toast.Style.Failure,title:r?.title??"Something went wrong",message:r?.message??t,primaryAction:r?.primaryAction??cr(e),secondaryAction:r?.primaryAction?cr(e):void 0})}var cr=e=>{let r=!0,t="[Extension Name]...",n="";try{let s=JSON.parse((0,fe.readFileSync)((0,Ye.join)(x.environment.assetsPath,"..","package.json"),"utf8"));t=`[${s.title}]...`,n=`https://raycast.com/${s.owner||s.author}/${s.name}`,(!s.owner||s.access==="public")&&(r=!1)}catch{}let a=x.environment.isDevelopment||r,o=e instanceof Error?e?.stack||e?.message||"":String(e);return{title:a?"Copy Logs":"Report Error",onAction(s){s.hide(),a?x.Clipboard.copy(o):(0,x.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(t)}&extension-url=${encodeURI(n)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${o}
\`\`\`
`)}`)}}};function kt(e,r,t){let n=(0,g.useRef)(0),[a,o]=(0,g.useState)({isLoading:!0}),s=H(e),c=H(t?.abortable),i=H(r||[]),p=H(t?.onError),l=H(t?.onData),m=H(t?.onWillExecute),b=H(t?.failureToastOptions),d=H(a.data),f=(0,g.useRef)(null),h=(0,g.useRef)({page:0}),k=(0,g.useRef)(!1),u=(0,g.useRef)(!0),V=(0,g.useRef)(50),A=(0,g.useCallback)(()=>(c.current&&(c.current.current?.abort(),c.current.current=new AbortController),++n.current),[c]),w=(0,g.useCallback)((...z)=>{let P=A();m.current?.(z),o(y=>({...y,isLoading:!0}));let G=pn(s.current)(...z);function _(y){return y.name=="AbortError"||P===n.current&&(p.current?p.current(y):x.environment.launchType!==x.LaunchType.Background&&mn(y,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(ee){ee.hide(),f.current?.(...i.current||[])}},...b.current}),o({error:y,isLoading:!1})),y}return typeof G=="function"?(k.current=!0,G(h.current).then(({data:y,hasMore:ee,cursor:Se})=>(P===n.current&&(h.current&&(h.current.cursor=Se,h.current.lastItem=y?.[y.length-1]),l.current&&l.current(y,h.current),ee&&(V.current=y.length),u.current=ee,o(se=>h.current.page===0?{data:y,isLoading:!1}:{data:(se.data||[])?.concat(y),isLoading:!1})),y),y=>(u.current=!1,_(y)))):(k.current=!1,G.then(y=>(P===n.current&&(l.current&&l.current(y),o({data:y,isLoading:!1})),y),_))},[l,p,i,s,o,f,m,h,b,A]);f.current=w;let S=(0,g.useCallback)(()=>{h.current={page:0};let z=i.current||[];return w(...z)},[w,i]),D=(0,g.useCallback)(async(z,P)=>{let G;try{if(P?.optimisticUpdate){A(),typeof P?.rollbackOnError!="function"&&P?.rollbackOnError!==!1&&(G=structuredClone(d.current?.value));let _=P.optimisticUpdate;o(y=>({...y,data:_(y.data)}))}return await z}catch(_){if(typeof P?.rollbackOnError=="function"){let y=P.rollbackOnError;o(ee=>({...ee,data:y(ee.data)}))}else P?.optimisticUpdate&&P?.rollbackOnError!==!1&&o(y=>({...y,data:G}));throw _}finally{P?.shouldRevalidateAfter!==!1&&(x.environment.launchType===x.LaunchType.Background||x.environment.commandMode==="menu-bar"?await S():S())}},[S,d,o,A]),O=(0,g.useCallback)(()=>{h.current.page+=1;let z=i.current||[];w(...z)},[h,i,w]);(0,g.useEffect)(()=>{h.current={page:0},t?.execute!==!1?w(...r||[]):A()},[hn([r,t?.execute,w]),c,h]),(0,g.useEffect)(()=>()=>{A()},[A]);let E=t?.execute!==!1?a.isLoading:!1,q={...a,isLoading:E},W=k.current?{pageSize:V.current,hasMore:u.current,onLoadMore:O}:void 0;return{...q,revalidate:S,mutate:D,pagination:W}}function pn(e){return e===Promise.all||e===Promise.race||e===Promise.resolve||e===Promise.reject?e.bind(Promise):e}function lr(e){return typeof e!="function"?!1:/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))!==null}function gn(e){return e instanceof URLSearchParams?e.toString():e}function hr(e,r=[]){function t(n){return"update"in e?e.update(n,"utf8"):e.write(n)}return{dispatch:function(n){n=gn(n),n===null?this._null():this["_"+typeof n](n)},_object:function(n){let a=/\[object (.*)\]/i,o=Object.prototype.toString.call(n),s=a.exec(o)?.[1]??"unknown:["+o+"]";s=s.toLowerCase();let c=null;if((c=r.indexOf(n))>=0){this.dispatch("[CIRCULAR:"+c+"]");return}else r.push(n);if(Buffer.isBuffer(n))return t("buffer:"),t(n.toString("utf8"));if(s!=="object"&&s!=="function"&&s!=="asyncfunction")if(this["_"+s])this["_"+s](n);else throw new Error('Unknown object type "'+s+'"');else{let i=Object.keys(n);i=i.sort(),lr(n)||i.splice(0,0,"prototype","__proto__","constructor"),t("object:"+i.length+":");let p=this;return i.forEach(function(l){p.dispatch(l),t(":"),p.dispatch(n[l]),t(",")})}},_array:function(n,a){a=typeof a<"u"?a:!1;let o=this;if(t("array:"+n.length+":"),!a||n.length<=1){n.forEach(function(i){o.dispatch(i)});return}let s=[],c=n.map(function(i){let p=bn(),l=r.slice();return hr(p,l).dispatch(i),s=s.concat(l.slice(r.length)),p.read().toString()});r=r.concat(s),c.sort(),this._array(c,!1)},_date:function(n){t("date:"+n.toJSON())},_symbol:function(n){t("symbol:"+n.toString())},_error:function(n){t("error:"+n.toString())},_boolean:function(n){t("bool:"+n.toString())},_string:function(n){t("string:"+n.length+":"),t(n.toString())},_function:function(n){t("fn:"),lr(n)?this.dispatch("[native]"):this.dispatch(n.toString()),this.dispatch("function-name:"+String(n.name)),this._object(n)},_number:function(n){t("number:"+n.toString())},_xml:function(n){t("xml:"+n.toString())},_null:function(){t("Null")},_undefined:function(){t("Undefined")},_regexp:function(n){t("regex:"+n.toString())},_uint8array:function(n){t("uint8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint8clampedarray:function(n){t("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(n))},_int8array:function(n){t("int8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint16array:function(n){t("uint16array:"),this.dispatch(Array.prototype.slice.call(n))},_int16array:function(n){t("int16array:"),this.dispatch(Array.prototype.slice.call(n))},_uint32array:function(n){t("uint32array:"),this.dispatch(Array.prototype.slice.call(n))},_int32array:function(n){t("int32array:"),this.dispatch(Array.prototype.slice.call(n))},_float32array:function(n){t("float32array:"),this.dispatch(Array.prototype.slice.call(n))},_float64array:function(n){t("float64array:"),this.dispatch(Array.prototype.slice.call(n))},_arraybuffer:function(n){t("arraybuffer:"),this.dispatch(new Uint8Array(n))},_url:function(n){t("url:"+n.toString())},_map:function(n){t("map:");let a=Array.from(n);this._array(a,!0)},_set:function(n){t("set:");let a=Array.from(n);this._array(a,!0)},_file:function(n){t("file:"),this.dispatch([n.name,n.size,n.type,n.lastModified])},_blob:function(){throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){t("domwindow")},_bigint:function(n){t("bigint:"+n.toString())},_process:function(){t("process")},_timer:function(){t("timer")},_pipe:function(){t("pipe")},_tcp:function(){t("tcp")},_udp:function(){t("udp")},_tty:function(){t("tty")},_statwatcher:function(){t("statwatcher")},_securecontext:function(){t("securecontext")},_connection:function(){t("connection")},_zlib:function(){t("zlib")},_context:function(){t("context")},_nodescript:function(){t("nodescript")},_httpparser:function(){t("httpparser")},_dataview:function(){t("dataview")},_signal:function(){t("signal")},_fsevent:function(){t("fsevent")},_tlswrap:function(){t("tlswrap")}}}function bn(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}function yn(e,r){let t=this[e];return t instanceof Date?`__raycast_cached_date__${t.toString()}`:Buffer.isBuffer(t)?`__raycast_cached_buffer__${t.toString("base64")}`:r}function $n(e,r){return typeof r=="string"&&r.startsWith("__raycast_cached_date__")?new Date(r.replace("__raycast_cached_date__","")):typeof r=="string"&&r.startsWith("__raycast_cached_buffer__")?Buffer.from(r.replace("__raycast_cached_buffer__",""),"base64"):r}function Ze(e){let r=fr.default.createHash("sha1");return hr(r).dispatch(e),r.digest("hex")}var wn=Symbol("cache without namespace"),ur=new Map;function vn(e,r,t){let n=t?.cacheNamespace||wn,a=ur.get(n)||ur.set(n,new x.Cache({namespace:t?.cacheNamespace})).get(n);if(!a)throw new Error("Missing cache");let o=H(e),s=H(r),c=(0,g.useSyncExternalStore)(a.subscribe,()=>{try{return a.get(o.current)}catch(m){console.error("Could not get Cache data:",m);return}}),i=(0,g.useMemo)(()=>{if(typeof c<"u"){if(c==="undefined")return;try{return JSON.parse(c,$n)}catch(m){return console.warn("The cached data is corrupted",m),s.current}}else return s.current},[c,s]),p=H(i),l=(0,g.useCallback)(m=>{let b=typeof m=="function"?m(p.current):m;if(typeof b>"u")a.set(o.current,"undefined");else{let d=JSON.stringify(b,yn);a.set(o.current,d)}return b},[a,o,p]);return[i,l]}var $e=Symbol();function kn(e,r,t){let{initialData:n,keepPreviousData:a,internal_cacheKeySuffix:o,...s}=t||{},c=(0,g.useRef)(null),[i,p]=vn(Ze(r||[])+o,$e,{cacheNamespace:Ze(e)}),l=(0,g.useRef)(i!==$e?i:n),m=(0,g.useRef)(void 0),{mutate:b,revalidate:d,...f}=kt(e,r||[],{...s,onData(A,w){m.current=w,s.onData&&s.onData(A,w),!(w&&w.page>0)&&(c.current="promise",l.current=A,p(A))}}),h,k=f.pagination;m.current&&m.current.page>0&&f.data?h=f.data:c.current==="promise"?h=l.current:a&&i!==$e?(h=i,k&&(k.hasMore=!0,k.pageSize=i.length)):a&&i===$e?h=l.current:i!==$e?(h=i,k&&(k.hasMore=!0,k.pageSize=i.length)):h=n;let u=H(h),V=(0,g.useCallback)(async(A,w)=>{let S;try{if(w?.optimisticUpdate){typeof w?.rollbackOnError!="function"&&w?.rollbackOnError!==!1&&(S=structuredClone(u.current));let D=w.optimisticUpdate(u.current);c.current="cache",l.current=D,p(D)}return await b(A,{shouldRevalidateAfter:w?.shouldRevalidateAfter})}catch(D){if(typeof w?.rollbackOnError=="function"){let O=w.rollbackOnError(u.current);c.current="cache",l.current=O,p(O)}else w?.optimisticUpdate&&w?.rollbackOnError!==!1&&(c.current="cache",l.current=S,p(S));throw D}},[p,b,u,l,c]);return(0,g.useEffect)(()=>{i!==$e&&(c.current="cache",l.current=i)},[i]),{data:h,isLoading:f.isLoading,error:f.error,mutate:m.current&&m.current.page>0?b:V,pagination:k,revalidate:d}}function En(e){if(e){let r=Sn(e);if(!r)return!1;if(r.subtype==="json"||r.suffix==="json"||r.suffix&&/\bjson\b/i.test(r.suffix)||r.subtype&&/\bjson\b/i.test(r.subtype))return!0}return!1}var xn=/^([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126});?$/;function Sn(e){let r=e.indexOf(";"),t=r!==-1?e.slice(0,r).trim():e.trim(),n=xn.exec(t.toLowerCase().toLowerCase());if(!n)return;let a=n[1],o=n[2],s,c=o.lastIndexOf("+");return c!==-1&&(s=o.substring(c+1),o=o.substring(0,c)),{type:a,subtype:o,suffix:s}}async function Rn(e){if(!e.ok)throw new Error(e.statusText);let r=e.headers.get("content-type");return r&&En(r)?await e.json():await e.text()}function Tn(e){return{data:e,hasMore:!1}}function Xe(e,r){let{parseResponse:t,mapResult:n,initialData:a,execute:o,keepPreviousData:s,onError:c,onData:i,onWillExecute:p,failureToastOptions:l,...m}=r||{},b={initialData:a,execute:o,keepPreviousData:s,onError:c,onData:i,onWillExecute:p,failureToastOptions:l},d=H(t||Rn),f=H(n||Tn),h=(0,g.useRef)(null),k=(0,g.useRef)(null),u=typeof e=="function"?e({page:0}):void 0;(!h.current||typeof k.current>"u"||k.current!==u)&&(h.current=e),k.current=u;let V=(0,g.useRef)(null),A=(0,g.useCallback)((D,O)=>async E=>{let q=await fetch(D(E),{signal:V.current?.signal,...O}),W=await d.current(q);return f.current?.(W)},[d,f]),w=(0,g.useCallback)(async(D,O)=>{let E=await fetch(D,{signal:V.current?.signal,...O}),q=await d.current(E);return f.current(q)?.data},[d,f]),S=(0,g.useMemo)(()=>k.current?A:w,[k,w,A]);return kn(S,[h.current,m],{...b,internal_cacheKeySuffix:k.current+Ze(f.current)+Ze(d.current),abortable:V})}var N=require("react/jsx-runtime"),Cn=({deployment:e,selectedTeam:r,username:t})=>{let[n,a]=(0,Qe.useState)();(0,Qe.useEffect)(()=>{n||ir(e,r).then(a)},[n,e,r]);let o=Lt(e.uid||e.id,r?.id,1),{isLoading:s,data:c}=Xe(o,{headers:_e}),i=c?.builds?.[0],p=f=>f.meta.githubCommitMessage?f.meta.githubCommitMessage:"No commit message",m=(f=>f.meta.githubCommitRef??null)(e),b=()=>i?.readyState?i.readyState.toLowerCase().replace(/\b[a-z]/g,f=>f.toUpperCase()):"",d=()=>{if(e.inspectorURL)return e.inspectorURL;let f=r?.slug||t;return f?Oe(f,e.name,e.uid||e.id):((0,T.showToast)({title:"Error",message:"Could not determine team or user name"}),"")};return(0,N.jsx)(T.Detail,{navigationTitle:p(e),isLoading:s||!n||!t,markdown:n,actions:(0,N.jsxs)(T.ActionPanel,{children:[(0,N.jsx)(T.Action.OpenInBrowser,{title:"Visit on Vercel",url:d(),icon:T.Icon.Link}),(0,N.jsx)(T.Action.OpenInBrowser,{title:"Visit in Browser",url:`https://${e.url}`,icon:T.Icon.Link})]}),metadata:(0,N.jsxs)(T.Detail.Metadata,{children:[(0,N.jsx)(T.Detail.Metadata.Label,{title:"State",text:b()}),(0,N.jsx)(T.Detail.Metadata.Label,{title:"Name",text:e.name}),(0,N.jsx)(T.Detail.Metadata.Link,{title:"Preview URL",text:e.url,target:`https://${e.url}`}),e.inspectorURL&&(0,N.jsx)(T.Detail.Metadata.Link,{title:"Visit on Vercel",text:e.url,target:d()}),m&&(0,N.jsx)(T.Detail.Metadata.Label,{title:"Git Branch",text:m,icon:{source:"boxicon-git-branch.svg",tintColor:T.Color.SecondaryText}}),(0,N.jsx)(T.Detail.Metadata.Label,{title:"Commit Message",text:p(e)}),(0,N.jsx)(T.Detail.Metadata.Separator,{}),(0,N.jsx)(T.Detail.Metadata.Label,{title:"Created",text:e.createdAt?qe(e.createdAt,new Date):""}),(0,N.jsx)(T.Detail.Metadata.Label,{title:"Creator",text:e.creator?.username||"Unknown"}),(0,N.jsx)(T.Detail.Metadata.Separator,{}),(0,N.jsx)(T.Detail.Metadata.Link,{title:"",text:"Inspect on Vercel",target:d()})]})})},mr=Cn;var et=require("@raycast/api"),Et=require("@raycast/api");var xe=require("react/jsx-runtime"),An=({onTeamChange:e})=>{let{selectedTeam:r,teams:t,updateSelectedTeam:n}=Je(),a=async s=>{s&&(await n(s),e())},o=t?.find(s=>s.id===r);return(0,xe.jsxs)(et.List.Dropdown,{value:r,tooltip:"Switch Team",onChange:async s=>await a(s),children:[o&&(0,xe.jsx)(et.List.Dropdown.Item,{title:o.name,value:o.id,icon:Et.Icon.TwoPeople}),t?.length&&t.filter(s=>s.id!==r).map(s=>(0,xe.jsx)(et.List.Dropdown.Item,{title:s.name,value:s.id,icon:Et.Icon.TwoPeople},s.id))]})},pr=An;var K=require("react/jsx-runtime"),_n=({projectId:e})=>{let{user:r,teams:t,selectedTeam:n}=Je(),a=Ut(n,e),{isLoading:o,data:s,revalidate:c}=Xe(a,{headers:_e,mapResult(l){return{data:l.deployments}},initialData:[]}),i=()=>{c()},p=t?.find(l=>l.id===n);return(0,K.jsx)(v.List,{throttle:!0,searchBarPlaceholder:"Search Deployments...",navigationTitle:"Results",isLoading:o||!r,searchBarAccessory:(0,K.jsx)(K.Fragment,{children:r&&(0,K.jsx)(pr,{onTeamChange:i})}),children:s.map(l=>{let m=In(l);return(0,K.jsx)(v.List.Item,{title:`${gr(l)}`,icon:Dn(l.readyState?l.readyState:l.state),subtitle:`${e?"":` ${l.name}`}`,keywords:[l.name,gr(l)||"",m||""],actions:(0,K.jsxs)(v.ActionPanel,{children:[(0,K.jsx)(v.Action.Push,{title:"Show Details",icon:v.Icon.Binoculars,target:(0,K.jsx)(mr,{username:r?.username,deployment:l,selectedTeam:p})}),(0,K.jsx)(v.Action.OpenInBrowser,{title:"Visit in Browser",url:`https://${l.url}`,icon:v.Icon.Link}),r&&(0,K.jsx)(v.Action.OpenInBrowser,{title:"Visit on Vercel",url:Oe(p?.slug||r.username,l.name,l.id||l.uid),icon:v.Icon.Link,shortcut:{modifiers:["cmd","opt"],key:"v"}}),(0,K.jsx)(v.Action.CopyToClipboard,{title:"Copy URL",content:`https://${l.url}`,icon:v.Icon.CopyClipboard,shortcut:{modifiers:["cmd","opt"],key:"c"}})]}),accessories:[{text:m,icon:m?{source:"boxicon-git-branch.svg",tintColor:v.Color.SecondaryText}:null},{text:l.createdAt?qe(l.createdAt,new Date):"",tooltip:l.createdAt?new Date(l.createdAt).toLocaleString():""}]},l.uid)})})},br=_n,gr=e=>e.meta.githubCommitMessage?e.meta.githubCommitMessage:"No commit message",In=e=>e.meta.githubCommitRef??null,Dn=e=>{switch(e){case"READY":return{source:v.Icon.Dot,tintColor:v.Color.Green};case"BUILDING":case"INITIALIZING":return{source:v.Icon.Dot,tintColor:v.Color.Blue};case"FAILED":return{source:v.Icon.Dot,tintColor:v.Color.Red};case"CANCELED":return{source:v.Icon.Dot,tintColor:v.Color.PrimaryText};case"ERROR":return{source:v.Icon.ExclamationMark,tintColor:v.Color.Red};case"QUEUED":return{source:v.Icon.Dot,tintColor:v.Color.SecondaryText};default:return v.Icon.QuestionMark}};var yr=require("@raycast/api");var On=async()=>{if((0,yr.getPreferenceValues)().accessToken.length!==24)throw new Error("Invalid token length. Expected 24 characters.");if(!await De())throw new Error("Failed to fetch user data. Token may be invalid.");return!0},$r=On;var te=require("@raycast/api"),tt=require("react/jsx-runtime"),Pn=()=>(0,tt.jsx)(te.Detail,{markdown:`# ERROR 

 Invalid token detected. Please set one in the settings.`,actions:(0,tt.jsx)(te.ActionPanel,{children:(0,tt.jsx)(te.Action,{icon:te.Icon.Gear,title:"Open Extension Preferences",onAction:te.openExtensionPreferences})})}),wr=Pn;var vr=require("@raycast/api"),we=require("react/jsx-runtime"),Un=({children:e})=>{let{isLoading:r,error:t}=kt($r,[],{failureToastOptions:{title:"Invalid token detected. Please set one in the settings."}});return r?(0,we.jsx)(vr.Detail,{isLoading:!0}):t?(0,we.jsx)(wr,{}):(0,we.jsx)(we.Fragment,{children:e})},kr=Un;var xt=require("react/jsx-runtime");function Ln(){return(0,xt.jsx)(kr,{children:(0,xt.jsx)(br,{})})}var Nn=Ln;
/*! Bundled license information:

use-sync-external-store/cjs/use-sync-external-store-shim.production.js:
  (**
   * @license React
   * use-sync-external-store-shim.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

use-sync-external-store/cjs/use-sync-external-store-shim.development.js:
  (**
   * @license React
   * use-sync-external-store-shim.development.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
