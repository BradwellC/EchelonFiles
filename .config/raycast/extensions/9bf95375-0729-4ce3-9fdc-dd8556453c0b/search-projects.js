"use strict";var Hr=Object.create;var ze=Object.defineProperty;var Kr=Object.getOwnPropertyDescriptor;var Jr=Object.getOwnPropertyNames;var qr=Object.getPrototypeOf,Zr=Object.prototype.hasOwnProperty;var bt=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),Bt=(e,r)=>{for(var t in r)ze(e,t,{get:r[t],enumerable:!0})},Gt=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of Jr(r))!Zr.call(e,a)&&a!==t&&ze(e,a,{get:()=>r[a],enumerable:!(n=Kr(r,a))||n.enumerable});return e};var ge=(e,r,t)=>(t=e!=null?Hr(qr(e)):{},Gt(r||!e||!e.__esModule?ze(t,"default",{value:e,enumerable:!0}):t,e)),Yr=e=>Gt(ze({},"__esModule",{value:!0}),e);var rr=bt(tr=>{"use strict";var Re=require("react");function an(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var sn=typeof Object.is=="function"?Object.is:an,on=Re.useState,cn=Re.useEffect,ln=Re.useLayoutEffect,un=Re.useDebugValue;function fn(e,r){var t=r(),n=on({inst:{value:t,getSnapshot:r}}),a=n[0].inst,o=n[1];return ln(function(){a.value=t,a.getSnapshot=r,yt(a)&&o({inst:a})},[e,t,r]),cn(function(){return yt(a)&&o({inst:a}),e(function(){yt(a)&&o({inst:a})})},[e]),un(t),t}function yt(e){var r=e.getSnapshot;e=e.value;try{var t=r();return!sn(e,t)}catch{return!0}}function dn(e,r){return r()}var hn=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?dn:fn;tr.useSyncExternalStore=Re.useSyncExternalStore!==void 0?Re.useSyncExternalStore:hn});var ar=bt(nr=>{"use strict";process.env.NODE_ENV!=="production"&&(function(){function e(m,d){return m===d&&(m!==0||1/m===1/d)||m!==m&&d!==d}function r(m,d){l||a.startTransition===void 0||(l=!0,console.error("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var g=d();if(!p){var k=d();o(g,k)||(console.error("The result of getSnapshot should be cached to avoid an infinite loop"),p=!0)}k=s({inst:{value:g,getSnapshot:d}});var f=k[0].inst,V=k[1];return i(function(){f.value=g,f.getSnapshot=d,t(f)&&V({inst:f})},[m,g,d]),c(function(){return t(f)&&V({inst:f}),m(function(){t(f)&&V({inst:f})})},[m]),u(g),g}function t(m){var d=m.getSnapshot;m=m.value;try{var g=d();return!o(m,g)}catch{return!0}}function n(m,d){return d()}typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());var a=require("react"),o=typeof Object.is=="function"?Object.is:e,s=a.useState,c=a.useEffect,i=a.useLayoutEffect,u=a.useDebugValue,l=!1,p=!1,b=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?n:r;nr.useSyncExternalStore=a.useSyncExternalStore!==void 0?a.useSyncExternalStore:b,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error())})()});var sr=bt((ga,$t)=>{"use strict";process.env.NODE_ENV==="production"?$t.exports=rr():$t.exports=ar()});var la={};Bt(la,{default:()=>ca});module.exports=Yr(la);var O=require("@raycast/api");var Xr=e=>{let r=new Intl.PluralRules("en-US",{type:"ordinal"}).select(e),t={one:"st",two:"nd",few:"rd",other:"th"}[r];return`${e}${t}`},Qr=(e,r,t=void 0)=>{let n=()=>{throw new Error("getTimeSince requires 1-2 arguments, of type date or date-string")};(typeof e>"u"||isNaN(Number(e))||typeof r<"u"&&isNaN(Number(r)))&&n();let a=r===void 0||Math.abs(Number(r)-Number(new Date))<50,o=Number(new Date(e)),s=Number(r===void 0?new Date:new Date(r??null));(isNaN(o)||isNaN(s))&&n();let c=new Intl.RelativeTimeFormat("en",{localeMatcher:"best fit",style:"long",numeric:"auto"}),i=o-s;if(t&&!isNaN(t)&&Math.abs(i)>=Number(t)){let[u,l,p,b]=new Date(o).toLocaleString("en-us",{weekday:"short",month:"short",day:"numeric",year:"numeric"}).replace(/,/g,"").split(" ");return`${u} ${l} ${Xr(Number(p))}, ${b}`}if(Math.abs(i)<1e3)return a?"now":"simultaneously";for(let[u,l]of[["year",31536e6],["month",26784e5],["week",6048e5],["day",864e5],["hour",36e5],["minute",6e4],["second",1e3]])if(Math.abs(i)>=l){let{sign:p,floor:b,ceil:m}=Math,d=c.format((p(i)===1?b:m)(i/l),u);return a||(d=Math.sign(i)===1?d.replace("in ","")+" later":d.replace("ago","prior")),d}return"just now"},Se=Qr;var ot=require("@raycast/api"),Ot=require("@raycast/api");var kr=require("react"),st=require("@raycast/api");var H=require("@raycast/api"),en=(0,H.getPreferenceValues)().accessToken,be={Authorization:"Bearer "+en},Te=Object.entries(be),he="https://api.vercel.com/";async function Be(){try{return(await(await fetch(he+"www/user",{method:"get",headers:be})).json()).user}catch(e){throw console.error(e),(0,H.showToast)({style:H.Toast.Style.Failure,title:"Failed to fetch user info"}),new Error("Failed to fetch user info")}}async function Ht(){let r=await(await fetch(he+"v1/teams",{method:"get",headers:be})).json(),t=[];for(let n of r.teams)t.push(n);return t}async function Kt(e,r){try{return(await(await fetch(he+`v8/projects/${e}/env/${r}`,{method:"delete",headers:be})).json()).environment}catch(t){throw console.error(t),(0,H.showToast)({style:H.Toast.Style.Failure,title:"Failed to delete environment variable"}),new Error("Failed to delete environment variable")}}function Jt(e,r,t=100){let n=he+"v6/deployments",a=`?limit=${t}&teamId=${e??""}`;return r&&(a+=`&projectId=${r}`),n+a}function qt(e,r,t=100){return he+`v11/deployments/${e}/builds?limit=${t}&teamId=${r??""}`}async function Zt(e,r){return[...await tn(e,r)].sort((n,a)=>a.updatedAt-n.updatedAt)}function Yt(e,r=100){return he+`v8/projects?teamId=${e??""}&limit=${r}`}async function tn(e,r){try{return(await(await fetch(he+`v8/projects/${e}/env?teamId=${r??""}`,{method:"get",headers:be})).json()).envs}catch(t){throw console.error(t),(0,H.showToast)({style:H.Toast.Style.Failure,title:"Failed to fetch environment variable"}),new Error("Failed to fetch environment variable")}}async function Xt(e,r,t){return await rn(e,r,t)}async function Qt(e,r,t){r.type="encrypted";try{return await(await fetch(he+`v9/projects/${e}/env?teamId=${t||""}`,{method:"post",headers:be,body:JSON.stringify(r)})).json()}catch(n){throw console.error(n),(0,H.showToast)({style:H.Toast.Style.Failure,title:"Failed to create environment variable"}),new Error("Failed to create environment variable")}}async function rn(e,r,t){try{return await(await fetch(he+`v8/projects/${e}/env/${r}`,{method:"patch",headers:be,body:JSON.stringify(t)})).json()}catch(n){throw console.error(n),(0,H.showToast)({style:H.Toast.Style.Failure,title:"Failed to fetch environment variable"}),new Error("Failed to fetch environment variable")}}function nn(e){let r="";return[].slice.call(new Uint8Array(e)).forEach(n=>r+=String.fromCharCode(n)),btoa(r)}async function er(e,r){try{let t=H.environment.appearance==="light"?"0":"1",n=await fetch(`https://vercel.com/api/screenshot?dark=${t}&deploymentId=${e}&withStatus=false&teamId=${r??""}`,{method:"get",headers:be});if(n.status!==200)return null;let a=await n.arrayBuffer();return"data:image/png;base64,"+nn(a)}catch(t){return console.error(t),null}}function Ge(e,r,t){return t.startsWith("dpl_")&&(t=t.substring(4)),`https://vercel.com/${e}/${r}/${t}`}var j=ge(require("react"),1),vr=ge(sr(),1);var B=ge(require("react"),1);var ye={};Bt(ye,{ERROR_REVALIDATE_EVENT:()=>mn,FOCUS_EVENT:()=>or,MUTATE_EVENT:()=>cr,RECONNECT_EVENT:()=>ir});var or=0,ir=1,cr=2,mn=3;var lr=Object.prototype.hasOwnProperty;function Ae(e,r){var t,n;if(e===r)return!0;if(e&&r&&(t=e.constructor)===r.constructor){if(t===Date)return e.getTime()===r.getTime();if(t===RegExp)return e.toString()===r.toString();if(t===Array){if((n=e.length)===r.length)for(;n--&&Ae(e[n],r[n]););return n===-1}if(!t||typeof e=="object"){n=0;for(t in e)if(lr.call(e,t)&&++n&&!lr.call(r,t)||!(t in r)||!Ae(e[t],r[t]))return!1;return Object.keys(r).length===n}}return e!==e&&r!==r}var se=new WeakMap,me=()=>{},M=me(),Ce=Object,E=e=>e===M,ee=e=>typeof e=="function",oe=(e,r)=>({...e,...r}),Ye=e=>ee(e.then),wt={},He={},Rt="undefined",Pe=typeof window!=Rt,Je=typeof document!=Rt,fr=Pe&&"Deno"in window,dr=()=>Pe&&typeof window.requestAnimationFrame!=Rt,Xe=(e,r)=>{let t=se.get(e);return[()=>!E(r)&&e.get(r)||wt,n=>{if(!E(r)){let a=e.get(r);r in He||(He[r]=a),t[5](r,oe(a,n),a||wt)}},t[6],()=>!E(r)&&r in He?He[r]:!E(r)&&e.get(r)||wt]},kt=!0,pn=()=>kt,[xt,St]=Pe&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[me,me],gn=()=>{let e=Je&&document.visibilityState;return E(e)||e!=="hidden"},bn=e=>(Je&&document.addEventListener("visibilitychange",e),xt("focus",e),()=>{Je&&document.removeEventListener("visibilitychange",e),St("focus",e)}),yn=e=>{let r=()=>{kt=!0,e()},t=()=>{kt=!1};return xt("online",r),xt("offline",t),()=>{St("online",r),St("offline",t)}},hr={isOnline:pn,isVisible:gn},mr={initFocus:bn,initReconnect:yn},Qe=!B.default.useId,we=!Pe||fr,At=e=>dr()?window.requestAnimationFrame(e):setTimeout(e,1),_e=we?B.useEffect:B.useLayoutEffect,vt=typeof navigator<"u"&&navigator.connection,Tt=!we&&vt&&(["slow-2g","2g"].includes(vt.effectiveType)||vt.saveData),Ke=new WeakMap,$n=e=>Ce.prototype.toString.call(e),Et=(e,r)=>e===`[object ${r}]`,wn=0,qe=e=>{let r=typeof e,t=$n(e),n=Et(t,"Date"),a=Et(t,"RegExp"),o=Et(t,"Object"),s,c;if(Ce(e)===e&&!n&&!a){if(s=Ke.get(e),s)return s;if(s=++wn+"~",Ke.set(e,s),Array.isArray(e)){for(s="@",c=0;c<e.length;c++)s+=qe(e[c])+",";Ke.set(e,s)}if(o){s="#";let i=Ce.keys(e).sort();for(;!E(c=i.pop());)E(e[c])||(s+=c+":"+qe(e[c])+",");Ke.set(e,s)}}else s=n?e.toJSON():r=="symbol"?e.toString():r=="string"?JSON.stringify(e):""+e;return s},Ne=e=>{if(ee(e))try{e=e()}catch{e=""}let r=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?qe(e):"",[e,r]},vn=0,Ve=()=>++vn;async function et(...e){let[r,t,n,a]=e,o=oe({populateCache:!0,throwOnError:!0},typeof a=="boolean"?{revalidate:a}:a||{}),s=o.populateCache,c=o.rollbackOnError,i=o.optimisticData,u=b=>typeof c=="function"?c(b):c!==!1,l=o.throwOnError;if(ee(t)){let b=t,m=[],d=r.keys();for(let g of d)!/^\$(inf|sub)\$/.test(g)&&b(r.get(g)._k)&&m.push(g);return Promise.all(m.map(p))}return p(t);async function p(b){let[m]=Ne(b);if(!m)return;let[d,g]=Xe(r,m),[k,f,V,P]=se.get(r),y=()=>{let U=k[m];return(ee(o.revalidate)?o.revalidate(d().data,b):o.revalidate!==!1)&&(delete V[m],delete P[m],U&&U[0])?U[0](2).then(()=>d().data):d().data};if(e.length<3)return y();let h=n,T,I=!1,x=Ve();f[m]=[x,0];let J=!E(i),D=d(),q=D.data,F=D._c,Y=E(F)?q:F;if(J&&(i=ee(i)?i(Y,q):i,g({data:i,_c:Y})),ee(h))try{h=h(Y)}catch(U){T=U,I=!0}if(h&&Ye(h))if(h=await h.catch(U=>{T=U,I=!0}),x!==f[m][0]){if(I)throw T;return h}else I&&J&&u(T)&&(s=!0,g({data:Y,_c:M}));if(s&&!I)if(ee(s)){let U=s(h,Y);g({data:U,error:M,_c:M})}else g({data:h,error:M,_c:M});if(f[m][1]=Ve(),Promise.resolve(y()).then(()=>{g({_c:M})}),I){if(l)throw T;return}return h}}var ur=(e,r)=>{for(let t in e)e[t][0]&&e[t][0](r)},Ct=(e,r)=>{if(!se.has(e)){let t=oe(mr,r),n=Object.create(null),a=et.bind(M,e),o=me,s=Object.create(null),c=(l,p)=>{let b=s[l]||[];return s[l]=b,b.push(p),()=>b.splice(b.indexOf(p),1)},i=(l,p,b)=>{e.set(l,p);let m=s[l];if(m)for(let d of m)d(p,b)},u=()=>{if(!se.has(e)&&(se.set(e,[n,Object.create(null),Object.create(null),Object.create(null),a,i,c]),!we)){let l=t.initFocus(setTimeout.bind(M,ur.bind(M,n,0))),p=t.initReconnect(setTimeout.bind(M,ur.bind(M,n,1)));o=()=>{l&&l(),p&&p(),se.delete(e)}}};return u(),[e,a,u,o]}return[e,se.get(e)[4]]},En=(e,r,t,n,a)=>{let o=t.errorRetryCount,s=a.retryCount,c=~~((Math.random()+.5)*(1<<(s<8?s:8)))*t.errorRetryInterval;!E(o)&&s>o||setTimeout(n,c,a)},pr=Ae,[tt,gr]=Ct(new Map),rt=oe({onLoadingSlow:me,onSuccess:me,onError:me,onErrorRetry:En,onDiscarded:me,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Tt?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Tt?5e3:3e3,compare:pr,isPaused:()=>!1,cache:tt,mutate:gr,fallback:{}},hr),Pt=(e,r)=>{let t=oe(e,r);if(r){let{use:n,fallback:a}=e,{use:o,fallback:s}=r;n&&o&&(t.use=n.concat(o)),a&&s&&(t.fallback=oe(a,s))}return t},Ze=(0,B.createContext)({}),_t=e=>{let{value:r}=e,t=(0,B.useContext)(Ze),n=ee(r),a=(0,B.useMemo)(()=>n?r(t):r,[n,t,r]),o=(0,B.useMemo)(()=>n?a:Pt(t,a),[n,t,a]),s=a&&a.provider,c=(0,B.useRef)(M);s&&!c.current&&(c.current=Ct(s(o.cache||tt),a));let i=c.current;return i&&(o.cache=i[0],o.mutate=i[1]),_e(()=>{if(i)return i[2]&&i[2](),i[3]},[]),(0,B.createElement)(Ze.Provider,oe(e,{value:o}))};var br="$inf$";var nt=ge(require("react"),1);var yr=Pe&&window.__SWR_DEVTOOLS_USE__,kn=yr?window.__SWR_DEVTOOLS_USE__:[],xn=()=>{yr&&(window.__SWR_DEVTOOLS_REACT__=nt.default)},Sn=e=>ee(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],Tn=()=>oe(rt,(0,nt.useContext)(Ze));var Rn=e=>(r,t,n)=>e(r,t&&((...o)=>{let[s]=Ne(r),[,,,c]=se.get(tt);if(s.startsWith(br))return t(...o);let i=c[s];return E(i)?t(...o):(delete c[s],i)}),n),An=kn.concat(Rn),$r=e=>function(...t){let n=Tn(),[a,o,s]=Sn(t),c=Pt(n,s),i=e,{use:u}=c,l=(u||[]).concat(An);for(let p=l.length;p--;)i=l[p](i);return i(a,o||c.fetcher||null,c)},wr=(e,r,t)=>{let n=r[e]||(r[e]=[]);return n.push(t),()=>{let a=n.indexOf(t);a>=0&&(n[a]=n[n.length-1],n.pop())}};xn();var Cn=()=>{},Ra=Cn();var Dt=j.default.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(r=>{e.status="fulfilled",e.value=r},r=>{e.status="rejected",e.reason=r}),e}}),It={dedupe:!0},Pn=(e,r,t)=>{let{cache:n,compare:a,suspense:o,fallbackData:s,revalidateOnMount:c,revalidateIfStale:i,refreshInterval:u,refreshWhenHidden:l,refreshWhenOffline:p,keepPreviousData:b}=t,[m,d,g,k]=se.get(n),[f,V]=Ne(e),P=(0,j.useRef)(!1),y=(0,j.useRef)(!1),h=(0,j.useRef)(f),T=(0,j.useRef)(r),I=(0,j.useRef)(t),x=()=>I.current,J=()=>x().isVisible()&&x().isOnline(),[D,q,F,Y]=Xe(n,f),U=(0,j.useRef)({}).current,v=E(s)?E(t.fallback)?M:t.fallback[f]:s,le=(_,A)=>{for(let G in U){let L=G;if(L==="data"){if(!a(_[L],A[L])&&(!E(_[L])||!a(We,A[L])))return!1}else if(A[L]!==_[L])return!1}return!0},Me=(0,j.useMemo)(()=>{let _=!f||!r?!1:E(c)?x().isPaused()||o?!1:i!==!1:c,A=Z=>{let fe=oe(Z);return delete fe._k,_?{isValidating:!0,isLoading:!0,...fe}:fe},G=D(),L=Y(),ae=A(G),xe=G===L?ae:A(L),z=ae;return[()=>{let Z=A(D());return le(Z,z)?(z.data=Z.data,z.isLoading=Z.isLoading,z.isValidating=Z.isValidating,z.error=Z.error,z):(z=Z,Z)},()=>xe]},[n,f]),pe=(0,vr.useSyncExternalStore)((0,j.useCallback)(_=>F(f,(A,G)=>{le(G,A)||_()}),[n,f]),Me[0],Me[1]),Vt=!P.current,Wr=m[f]&&m[f].length>0,ke=pe.data,$e=E(ke)?v&&Ye(v)?Dt(v):v:ke,je=pe.error,mt=(0,j.useRef)($e),We=b?E(ke)?E(mt.current)?$e:mt.current:ke:$e,Nt=Wr&&!E(je)?!1:Vt&&!E(c)?c:x().isPaused()?!1:o?E($e)?!1:i:E($e)||i,Ft=!!(f&&r&&Vt&&Nt),zr=E(pe.isValidating)?Ft:pe.isValidating,Br=E(pe.isLoading)?Ft:pe.isLoading,Le=(0,j.useCallback)(async _=>{let A=T.current;if(!f||!A||y.current||x().isPaused())return!1;let G,L,ae=!0,xe=_||{},z=!g[f]||!xe.dedupe,Z=()=>Qe?!y.current&&f===h.current&&P.current:f===h.current,fe={isValidating:!1,isLoading:!1},jt=()=>{q(fe)},Wt=()=>{let te=g[f];te&&te[1]===L&&delete g[f]},zt={isValidating:!0};E(D().data)&&(zt.isLoading=!0);try{if(z&&(q(zt),t.loadingTimeout&&E(D().data)&&setTimeout(()=>{ae&&Z()&&x().onLoadingSlow(f,t)},t.loadingTimeout),g[f]=[A(V),Ve()]),[G,L]=g[f],G=await G,z&&setTimeout(Wt,t.dedupingInterval),!g[f]||g[f][1]!==L)return z&&Z()&&x().onDiscarded(f),!1;fe.error=M;let te=d[f];if(!E(te)&&(L<=te[0]||L<=te[1]||te[1]===0))return jt(),z&&Z()&&x().onDiscarded(f),!1;let de=D().data;fe.data=a(de,G)?de:G,z&&Z()&&x().onSuccess(G,f,t)}catch(te){Wt();let de=x(),{shouldRetryOnError:pt}=de;de.isPaused()||(fe.error=te,z&&Z()&&(de.onError(te,f,de),(pt===!0||ee(pt)&&pt(te))&&(!x().revalidateOnFocus||!x().revalidateOnReconnect||J())&&de.onErrorRetry(te,f,de,Gr=>{let gt=m[f];gt&&gt[0]&&gt[0](ye.ERROR_REVALIDATE_EVENT,Gr)},{retryCount:(xe.retryCount||0)+1,dedupe:!0})))}return ae=!1,jt(),!0},[f,n]),Mt=(0,j.useCallback)((..._)=>et(n,h.current,..._),[]);if(_e(()=>{T.current=r,I.current=t,E(ke)||(mt.current=ke)}),_e(()=>{if(!f)return;let _=Le.bind(M,It),A=0;x().revalidateOnFocus&&(A=Date.now()+x().focusThrottleInterval);let L=wr(f,m,(ae,xe={})=>{if(ae==ye.FOCUS_EVENT){let z=Date.now();x().revalidateOnFocus&&z>A&&J()&&(A=z+x().focusThrottleInterval,_())}else if(ae==ye.RECONNECT_EVENT)x().revalidateOnReconnect&&J()&&_();else{if(ae==ye.MUTATE_EVENT)return Le();if(ae==ye.ERROR_REVALIDATE_EVENT)return Le(xe)}});return y.current=!1,h.current=f,P.current=!0,q({_k:V}),Nt&&(g[f]||(E($e)||we?_():At(_))),()=>{y.current=!0,L()}},[f]),_e(()=>{let _;function A(){let L=ee(u)?u(D().data):u;L&&_!==-1&&(_=setTimeout(G,L))}function G(){!D().error&&(l||x().isVisible())&&(p||x().isOnline())?Le(It).then(A):A()}return A(),()=>{_&&(clearTimeout(_),_=-1)}},[u,l,p,f]),(0,j.useDebugValue)(We),o&&E($e)&&f){if(!Qe&&we)throw new Error("Fallback data is required when using Suspense in SSR.");T.current=r,I.current=t,y.current=!1;let _=k[f];if(!E(_)){let A=Mt(_);Dt(A)}if(E(je)){let A=Le(It);E(We)||(A.status="fulfilled",A.value=!0),Dt(A)}else throw je}return{mutate:Mt,get data(){return U.data=!0,We},get error(){return U.error=!0,je},get isValidating(){return U.isValidating=!0,zr},get isLoading(){return U.isLoading=!0,Br}}},Aa=Ce.defineProperty(_t,"defaultValue",{value:rt}),Er=$r(Pn);var _n=(e,r)=>{let{data:t,mutate:n}=Er(e,{fallbackData:r});return[t,n]},at=_n;var Dn=()=>{let[e,r]=at("user"),[t,n]=at("teams"),[a,o]=at("selectedTeamId");return(0,kr.useEffect)(()=>{(async()=>{if(!e||!t){let i=await st.LocalStorage.getItem("selectedTeamId");i&&o(i);let[u,l]=await Promise.all([Be(),Ht()]);r(u),n(l),i&&(l.find(b=>b.id===i)||o(void 0))}})()},[]),{user:e,selectedTeam:a,teams:t,updateSelectedTeam:async c=>{let i=t?.find(u=>u.id===c);i?(o(i.id),await st.LocalStorage.setItem("selectedTeamId",i.id)):(o(void 0),await st.LocalStorage.removeItem("selectedTeamId"))}}},De=Dn;var Fe=require("react/jsx-runtime"),In=({onTeamChange:e})=>{let{selectedTeam:r,teams:t,updateSelectedTeam:n}=De(),a=async s=>{s&&(await n(s),e())},o=t?.find(s=>s.id===r);return(0,Fe.jsxs)(ot.List.Dropdown,{value:r,tooltip:"Switch Team",onChange:async s=>await a(s),children:[o&&(0,Fe.jsx)(ot.List.Dropdown.Item,{title:o.name,value:o.id,icon:Ot.Icon.TwoPeople}),t?.length&&t.filter(s=>s.id!==r).map(s=>(0,Fe.jsx)(ot.List.Dropdown.Item,{title:s.name,value:s.id,icon:Ot.Icon.TwoPeople},s.id))]})},it=In;var $=ge(require("react")),R=require("@raycast/api");var ve=ge(require("node:fs")),lt=ge(require("node:path")),Rr=ge(require("node:crypto"));var Ar=require("react/jsx-runtime");function On(e){let r=(0,$.useRef)(e),t=(0,$.useRef)(0);return Ae(e,r.current)||(r.current=e,t.current+=1),(0,$.useMemo)(()=>r.current,[t.current])}function X(e){let r=(0,$.useRef)(e);return r.current=e,r}function Un(e,r){let t=e instanceof Error?e.message:String(e);return(0,R.showToast)({style:R.Toast.Style.Failure,title:r?.title??"Something went wrong",message:r?.message??t,primaryAction:r?.primaryAction??xr(e),secondaryAction:r?.primaryAction?xr(e):void 0})}var xr=e=>{let r=!0,t="[Extension Name]...",n="";try{let s=JSON.parse((0,ve.readFileSync)((0,lt.join)(R.environment.assetsPath,"..","package.json"),"utf8"));t=`[${s.title}]...`,n=`https://raycast.com/${s.owner||s.author}/${s.name}`,(!s.owner||s.access==="public")&&(r=!1)}catch{}let a=R.environment.isDevelopment||r,o=e instanceof Error?e?.stack||e?.message||"":String(e);return{title:a?"Copy Logs":"Report Error",onAction(s){s.hide(),a?R.Clipboard.copy(o):(0,R.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(t)}&extension-url=${encodeURI(n)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${o}
\`\`\`
`)}`)}}};function Ut(e,r,t){let n=(0,$.useRef)(0),[a,o]=(0,$.useState)({isLoading:!0}),s=X(e),c=X(t?.abortable),i=X(r||[]),u=X(t?.onError),l=X(t?.onData),p=X(t?.onWillExecute),b=X(t?.failureToastOptions),m=X(a.data),d=(0,$.useRef)(null),g=(0,$.useRef)({page:0}),k=(0,$.useRef)(!1),f=(0,$.useRef)(!0),V=(0,$.useRef)(50),P=(0,$.useCallback)(()=>(c.current&&(c.current.current?.abort(),c.current.current=new AbortController),++n.current),[c]),y=(0,$.useCallback)((...q)=>{let F=P();p.current?.(q),o(v=>({...v,isLoading:!0}));let Y=Ln(s.current)(...q);function U(v){return v.name=="AbortError"||F===n.current&&(u.current?u.current(v):R.environment.launchType!==R.LaunchType.Background&&Un(v,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(le){le.hide(),d.current?.(...i.current||[])}},...b.current}),o({error:v,isLoading:!1})),v}return typeof Y=="function"?(k.current=!0,Y(g.current).then(({data:v,hasMore:le,cursor:Me})=>(F===n.current&&(g.current&&(g.current.cursor=Me,g.current.lastItem=v?.[v.length-1]),l.current&&l.current(v,g.current),le&&(V.current=v.length),f.current=le,o(pe=>g.current.page===0?{data:v,isLoading:!1}:{data:(pe.data||[])?.concat(v),isLoading:!1})),v),v=>(f.current=!1,U(v)))):(k.current=!1,Y.then(v=>(F===n.current&&(l.current&&l.current(v),o({data:v,isLoading:!1})),v),U))},[l,u,i,s,o,d,p,g,b,P]);d.current=y;let h=(0,$.useCallback)(()=>{g.current={page:0};let q=i.current||[];return y(...q)},[y,i]),T=(0,$.useCallback)(async(q,F)=>{let Y;try{if(F?.optimisticUpdate){P(),typeof F?.rollbackOnError!="function"&&F?.rollbackOnError!==!1&&(Y=structuredClone(m.current?.value));let U=F.optimisticUpdate;o(v=>({...v,data:U(v.data)}))}return await q}catch(U){if(typeof F?.rollbackOnError=="function"){let v=F.rollbackOnError;o(le=>({...le,data:v(le.data)}))}else F?.optimisticUpdate&&F?.rollbackOnError!==!1&&o(v=>({...v,data:Y}));throw U}finally{F?.shouldRevalidateAfter!==!1&&(R.environment.launchType===R.LaunchType.Background||R.environment.commandMode==="menu-bar"?await h():h())}},[h,m,o,P]),I=(0,$.useCallback)(()=>{g.current.page+=1;let q=i.current||[];y(...q)},[g,i,y]);(0,$.useEffect)(()=>{g.current={page:0},t?.execute!==!1?y(...r||[]):P()},[On([r,t?.execute,y]),c,g]),(0,$.useEffect)(()=>()=>{P()},[P]);let x=t?.execute!==!1?a.isLoading:!1,J={...a,isLoading:x},D=k.current?{pageSize:V.current,hasMore:f.current,onLoadMore:I}:void 0;return{...J,revalidate:h,mutate:T,pagination:D}}function Ln(e){return e===Promise.all||e===Promise.race||e===Promise.resolve||e===Promise.reject?e.bind(Promise):e}function Sr(e){return typeof e!="function"?!1:/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))!==null}function Vn(e){return e instanceof URLSearchParams?e.toString():e}function Cr(e,r=[]){function t(n){return"update"in e?e.update(n,"utf8"):e.write(n)}return{dispatch:function(n){n=Vn(n),n===null?this._null():this["_"+typeof n](n)},_object:function(n){let a=/\[object (.*)\]/i,o=Object.prototype.toString.call(n),s=a.exec(o)?.[1]??"unknown:["+o+"]";s=s.toLowerCase();let c=null;if((c=r.indexOf(n))>=0){this.dispatch("[CIRCULAR:"+c+"]");return}else r.push(n);if(Buffer.isBuffer(n))return t("buffer:"),t(n.toString("utf8"));if(s!=="object"&&s!=="function"&&s!=="asyncfunction")if(this["_"+s])this["_"+s](n);else throw new Error('Unknown object type "'+s+'"');else{let i=Object.keys(n);i=i.sort(),Sr(n)||i.splice(0,0,"prototype","__proto__","constructor"),t("object:"+i.length+":");let u=this;return i.forEach(function(l){u.dispatch(l),t(":"),u.dispatch(n[l]),t(",")})}},_array:function(n,a){a=typeof a<"u"?a:!1;let o=this;if(t("array:"+n.length+":"),!a||n.length<=1){n.forEach(function(i){o.dispatch(i)});return}let s=[],c=n.map(function(i){let u=Nn(),l=r.slice();return Cr(u,l).dispatch(i),s=s.concat(l.slice(r.length)),u.read().toString()});r=r.concat(s),c.sort(),this._array(c,!1)},_date:function(n){t("date:"+n.toJSON())},_symbol:function(n){t("symbol:"+n.toString())},_error:function(n){t("error:"+n.toString())},_boolean:function(n){t("bool:"+n.toString())},_string:function(n){t("string:"+n.length+":"),t(n.toString())},_function:function(n){t("fn:"),Sr(n)?this.dispatch("[native]"):this.dispatch(n.toString()),this.dispatch("function-name:"+String(n.name)),this._object(n)},_number:function(n){t("number:"+n.toString())},_xml:function(n){t("xml:"+n.toString())},_null:function(){t("Null")},_undefined:function(){t("Undefined")},_regexp:function(n){t("regex:"+n.toString())},_uint8array:function(n){t("uint8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint8clampedarray:function(n){t("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(n))},_int8array:function(n){t("int8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint16array:function(n){t("uint16array:"),this.dispatch(Array.prototype.slice.call(n))},_int16array:function(n){t("int16array:"),this.dispatch(Array.prototype.slice.call(n))},_uint32array:function(n){t("uint32array:"),this.dispatch(Array.prototype.slice.call(n))},_int32array:function(n){t("int32array:"),this.dispatch(Array.prototype.slice.call(n))},_float32array:function(n){t("float32array:"),this.dispatch(Array.prototype.slice.call(n))},_float64array:function(n){t("float64array:"),this.dispatch(Array.prototype.slice.call(n))},_arraybuffer:function(n){t("arraybuffer:"),this.dispatch(new Uint8Array(n))},_url:function(n){t("url:"+n.toString())},_map:function(n){t("map:");let a=Array.from(n);this._array(a,!0)},_set:function(n){t("set:");let a=Array.from(n);this._array(a,!0)},_file:function(n){t("file:"),this.dispatch([n.name,n.size,n.type,n.lastModified])},_blob:function(){throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){t("domwindow")},_bigint:function(n){t("bigint:"+n.toString())},_process:function(){t("process")},_timer:function(){t("timer")},_pipe:function(){t("pipe")},_tcp:function(){t("tcp")},_udp:function(){t("udp")},_tty:function(){t("tty")},_statwatcher:function(){t("statwatcher")},_securecontext:function(){t("securecontext")},_connection:function(){t("connection")},_zlib:function(){t("zlib")},_context:function(){t("context")},_nodescript:function(){t("nodescript")},_httpparser:function(){t("httpparser")},_dataview:function(){t("dataview")},_signal:function(){t("signal")},_fsevent:function(){t("fsevent")},_tlswrap:function(){t("tlswrap")}}}function Nn(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}function Fn(e,r){let t=this[e];return t instanceof Date?`__raycast_cached_date__${t.toString()}`:Buffer.isBuffer(t)?`__raycast_cached_buffer__${t.toString("base64")}`:r}function Mn(e,r){return typeof r=="string"&&r.startsWith("__raycast_cached_date__")?new Date(r.replace("__raycast_cached_date__","")):typeof r=="string"&&r.startsWith("__raycast_cached_buffer__")?Buffer.from(r.replace("__raycast_cached_buffer__",""),"base64"):r}function ct(e){let r=Rr.default.createHash("sha1");return Cr(r).dispatch(e),r.digest("hex")}var jn=Symbol("cache without namespace"),Tr=new Map;function Wn(e,r,t){let n=t?.cacheNamespace||jn,a=Tr.get(n)||Tr.set(n,new R.Cache({namespace:t?.cacheNamespace})).get(n);if(!a)throw new Error("Missing cache");let o=X(e),s=X(r),c=(0,$.useSyncExternalStore)(a.subscribe,()=>{try{return a.get(o.current)}catch(p){console.error("Could not get Cache data:",p);return}}),i=(0,$.useMemo)(()=>{if(typeof c<"u"){if(c==="undefined")return;try{return JSON.parse(c,Mn)}catch(p){return console.warn("The cached data is corrupted",p),s.current}}else return s.current},[c,s]),u=X(i),l=(0,$.useCallback)(p=>{let b=typeof p=="function"?p(u.current):p;if(typeof b>"u")a.set(o.current,"undefined");else{let m=JSON.stringify(b,Fn);a.set(o.current,m)}return b},[a,o,u]);return[i,l]}var Ie=Symbol();function zn(e,r,t){let{initialData:n,keepPreviousData:a,internal_cacheKeySuffix:o,...s}=t||{},c=(0,$.useRef)(null),[i,u]=Wn(ct(r||[])+o,Ie,{cacheNamespace:ct(e)}),l=(0,$.useRef)(i!==Ie?i:n),p=(0,$.useRef)(void 0),{mutate:b,revalidate:m,...d}=Ut(e,r||[],{...s,onData(P,y){p.current=y,s.onData&&s.onData(P,y),!(y&&y.page>0)&&(c.current="promise",l.current=P,u(P))}}),g,k=d.pagination;p.current&&p.current.page>0&&d.data?g=d.data:c.current==="promise"?g=l.current:a&&i!==Ie?(g=i,k&&(k.hasMore=!0,k.pageSize=i.length)):a&&i===Ie?g=l.current:i!==Ie?(g=i,k&&(k.hasMore=!0,k.pageSize=i.length)):g=n;let f=X(g),V=(0,$.useCallback)(async(P,y)=>{let h;try{if(y?.optimisticUpdate){typeof y?.rollbackOnError!="function"&&y?.rollbackOnError!==!1&&(h=structuredClone(f.current));let T=y.optimisticUpdate(f.current);c.current="cache",l.current=T,u(T)}return await b(P,{shouldRevalidateAfter:y?.shouldRevalidateAfter})}catch(T){if(typeof y?.rollbackOnError=="function"){let I=y.rollbackOnError(f.current);c.current="cache",l.current=I,u(I)}else y?.optimisticUpdate&&y?.rollbackOnError!==!1&&(c.current="cache",l.current=h,u(h));throw T}},[u,b,f,l,c]);return(0,$.useEffect)(()=>{i!==Ie&&(c.current="cache",l.current=i)},[i]),{data:g,isLoading:d.isLoading,error:d.error,mutate:p.current&&p.current.page>0?b:V,pagination:k,revalidate:m}}function Bn(e){if(e){let r=Hn(e);if(!r)return!1;if(r.subtype==="json"||r.suffix==="json"||r.suffix&&/\bjson\b/i.test(r.suffix)||r.subtype&&/\bjson\b/i.test(r.subtype))return!0}return!1}var Gn=/^([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126});?$/;function Hn(e){let r=e.indexOf(";"),t=r!==-1?e.slice(0,r).trim():e.trim(),n=Gn.exec(t.toLowerCase().toLowerCase());if(!n)return;let a=n[1],o=n[2],s,c=o.lastIndexOf("+");return c!==-1&&(s=o.substring(c+1),o=o.substring(0,c)),{type:a,subtype:o,suffix:s}}async function Kn(e){if(!e.ok)throw new Error(e.statusText);let r=e.headers.get("content-type");return r&&Bn(r)?await e.json():await e.text()}function Jn(e){return{data:e,hasMore:!1}}function Oe(e,r){let{parseResponse:t,mapResult:n,initialData:a,execute:o,keepPreviousData:s,onError:c,onData:i,onWillExecute:u,failureToastOptions:l,...p}=r||{},b={initialData:a,execute:o,keepPreviousData:s,onError:c,onData:i,onWillExecute:u,failureToastOptions:l},m=X(t||Kn),d=X(n||Jn),g=(0,$.useRef)(null),k=(0,$.useRef)(null),f=typeof e=="function"?e({page:0}):void 0;(!g.current||typeof k.current>"u"||k.current!==f)&&(g.current=e),k.current=f;let V=(0,$.useRef)(null),P=(0,$.useCallback)((T,I)=>async x=>{let J=await fetch(T(x),{signal:V.current?.signal,...I}),D=await m.current(J);return d.current?.(D)},[m,d]),y=(0,$.useCallback)(async(T,I)=>{let x=await fetch(T,{signal:V.current?.signal,...I}),J=await m.current(x);return d.current(J)?.data},[m,d]),h=(0,$.useMemo)(()=>k.current?P:y,[k,y,P]);return zn(h,[g.current,p],{...b,internal_cacheKeySuffix:k.current+ct(d.current)+ct(m.current),abortable:V})}var C=require("@raycast/api"),ut=require("react");var qn=async(e,r)=>{let t,n,a;t=`# ${e.name}
`,n=a="";let o=e.readyState||e.state,s=c=>`**${c}**`;switch(o){case"READY":{let c=await er(e.uid||e.id,r?.id);c?n+=`[![A screenshot of the deployment](${c})](https://${e.url})`:n+="No screenshot available";break}case"BUILDING":case"INITIALIZING":t+=s`Deployment is still building...`;break;case"FAILED":t+=s`Deployment failed.`;break;case"CANCELED":t+=s`Deployment was canceled.`;break;case"ERROR":{t+=s`Deployment had an error.`;break}default:t+=s`Deployment is in an unknown state...`}return`${t}

${n}

${a}`},Pr=qn;var W=require("react/jsx-runtime"),Zn=({deployment:e,selectedTeam:r,username:t})=>{let[n,a]=(0,ut.useState)();(0,ut.useEffect)(()=>{n||Pr(e,r).then(a)},[n,e,r]);let o=qt(e.uid||e.id,r?.id,1),{isLoading:s,data:c}=Oe(o,{headers:Te}),i=c?.builds?.[0],u=d=>d.meta.githubCommitMessage?d.meta.githubCommitMessage:"No commit message",p=(d=>d.meta.githubCommitRef??null)(e),b=()=>i?.readyState?i.readyState.toLowerCase().replace(/\b[a-z]/g,d=>d.toUpperCase()):"",m=()=>{if(e.inspectorURL)return e.inspectorURL;let d=r?.slug||t;return d?Ge(d,e.name,e.uid||e.id):((0,C.showToast)({title:"Error",message:"Could not determine team or user name"}),"")};return(0,W.jsx)(C.Detail,{navigationTitle:u(e),isLoading:s||!n||!t,markdown:n,actions:(0,W.jsxs)(C.ActionPanel,{children:[(0,W.jsx)(C.Action.OpenInBrowser,{title:"Visit on Vercel",url:m(),icon:C.Icon.Link}),(0,W.jsx)(C.Action.OpenInBrowser,{title:"Visit in Browser",url:`https://${e.url}`,icon:C.Icon.Link})]}),metadata:(0,W.jsxs)(C.Detail.Metadata,{children:[(0,W.jsx)(C.Detail.Metadata.Label,{title:"State",text:b()}),(0,W.jsx)(C.Detail.Metadata.Label,{title:"Name",text:e.name}),(0,W.jsx)(C.Detail.Metadata.Link,{title:"Preview URL",text:e.url,target:`https://${e.url}`}),e.inspectorURL&&(0,W.jsx)(C.Detail.Metadata.Link,{title:"Visit on Vercel",text:e.url,target:m()}),p&&(0,W.jsx)(C.Detail.Metadata.Label,{title:"Git Branch",text:p,icon:{source:"boxicon-git-branch.svg",tintColor:C.Color.SecondaryText}}),(0,W.jsx)(C.Detail.Metadata.Label,{title:"Commit Message",text:u(e)}),(0,W.jsx)(C.Detail.Metadata.Separator,{}),(0,W.jsx)(C.Detail.Metadata.Label,{title:"Created",text:e.createdAt?Se(e.createdAt,new Date):""}),(0,W.jsx)(C.Detail.Metadata.Label,{title:"Creator",text:e.creator?.username||"Unknown"}),(0,W.jsx)(C.Detail.Metadata.Separator,{}),(0,W.jsx)(C.Detail.Metadata.Link,{title:"",text:"Inspect on Vercel",target:m()})]})})},ft=Zn;var S=require("@raycast/api");var Q=require("react/jsx-runtime"),Yn=({projectId:e})=>{let{user:r,teams:t,selectedTeam:n}=De(),a=Jt(n,e),{isLoading:o,data:s,revalidate:c}=Oe(a,{headers:Te,mapResult(l){return{data:l.deployments}},initialData:[]}),i=()=>{c()},u=t?.find(l=>l.id===n);return(0,Q.jsx)(S.List,{throttle:!0,searchBarPlaceholder:"Search Deployments...",navigationTitle:"Results",isLoading:o||!r,searchBarAccessory:(0,Q.jsx)(Q.Fragment,{children:r&&(0,Q.jsx)(it,{onTeamChange:i})}),children:s.map(l=>{let p=Xn(l);return(0,Q.jsx)(S.List.Item,{title:`${_r(l)}`,icon:Qn(l.readyState?l.readyState:l.state),subtitle:`${e?"":` ${l.name}`}`,keywords:[l.name,_r(l)||"",p||""],actions:(0,Q.jsxs)(S.ActionPanel,{children:[(0,Q.jsx)(S.Action.Push,{title:"Show Details",icon:S.Icon.Binoculars,target:(0,Q.jsx)(ft,{username:r?.username,deployment:l,selectedTeam:u})}),(0,Q.jsx)(S.Action.OpenInBrowser,{title:"Visit in Browser",url:`https://${l.url}`,icon:S.Icon.Link}),r&&(0,Q.jsx)(S.Action.OpenInBrowser,{title:"Visit on Vercel",url:Ge(u?.slug||r.username,l.name,l.id||l.uid),icon:S.Icon.Link,shortcut:{modifiers:["cmd","opt"],key:"v"}}),(0,Q.jsx)(S.Action.CopyToClipboard,{title:"Copy URL",content:`https://${l.url}`,icon:S.Icon.CopyClipboard,shortcut:{modifiers:["cmd","opt"],key:"c"}})]}),accessories:[{text:p,icon:p?{source:"boxicon-git-branch.svg",tintColor:S.Color.SecondaryText}:null},{text:l.createdAt?Se(l.createdAt,new Date):"",tooltip:l.createdAt?new Date(l.createdAt).toLocaleString():""}]},l.uid)})})},Dr=Yn,_r=e=>e.meta.githubCommitMessage?e.meta.githubCommitMessage:"No commit message",Xn=e=>e.meta.githubCommitRef??null,Qn=e=>{switch(e){case"READY":return{source:S.Icon.Dot,tintColor:S.Color.Green};case"BUILDING":case"INITIALIZING":return{source:S.Icon.Dot,tintColor:S.Color.Blue};case"FAILED":return{source:S.Icon.Dot,tintColor:S.Color.Red};case"CANCELED":return{source:S.Icon.Dot,tintColor:S.Color.PrimaryText};case"ERROR":return{source:S.Icon.ExclamationMark,tintColor:S.Color.Red};case"QUEUED":return{source:S.Icon.Dot,tintColor:S.Color.SecondaryText};default:return S.Icon.QuestionMark}};var w=require("@raycast/api"),Ee=require("react");var re=require("@raycast/api"),ie=require("react/jsx-runtime"),ea=({updateEnvVar:e,envVar:r})=>{let t=n=>{let o={target:(()=>{let s=[];return n["edit-form-development"]&&s.push("development"),n["edit-form-preview"]&&s.push("preview"),n["edit-form-production"]&&s.push("production"),s})(),key:n.key,value:n.value};e(r.id,o)};return(0,ie.jsxs)(re.Form,{actions:(0,ie.jsx)(re.ActionPanel,{children:(0,ie.jsx)(re.Action.SubmitForm,{title:"Submit",onSubmit:t})}),children:[(0,ie.jsx)(re.Form.TextField,{id:"key",defaultValue:r.key,title:"Environment variable key"}),(0,ie.jsx)(re.Form.TextField,{id:"value",defaultValue:r.value,title:"Environment variable value"}),(0,ie.jsx)(re.Form.Separator,{}),(0,ie.jsx)(re.Form.Checkbox,{id:"edit-form-production",label:"Production",defaultValue:r.target?.includes("production")}),(0,ie.jsx)(re.Form.Checkbox,{id:"edit-form-preview",label:"Preview",defaultValue:r.target?.includes("preview")}),(0,ie.jsx)(re.Form.Checkbox,{id:"edit-form-development",label:"Development",defaultValue:r.target?.includes("development")})]})},Ir=ea;var ne=require("@raycast/api"),ce=require("react/jsx-runtime"),ta=({createEnvVar:e})=>{let r=t=>{let a={target:(()=>{let o=[];return t["edit-form-development"]&&o.push("development"),t["edit-form-preview"]&&o.push("preview"),t["edit-form-production"]&&o.push("production"),o})(),key:t.key,value:t.value};e(a)};return(0,ce.jsxs)(ne.Form,{navigationTitle:"New Environment Variable",actions:(0,ce.jsx)(ne.ActionPanel,{children:(0,ce.jsx)(ne.Action.SubmitForm,{title:"Submit",onSubmit:r})}),children:[(0,ce.jsx)(ne.Form.TextField,{id:"key",title:"Environment variable key",placeholder:"YOUR_KEY"}),(0,ce.jsx)(ne.Form.TextField,{id:"value",title:"Environment variable value",placeholder:"your_value"}),(0,ce.jsx)(ne.Form.Separator,{}),(0,ce.jsx)(ne.Form.Checkbox,{id:"edit-form-production",label:"Production"}),(0,ce.jsx)(ne.Form.Checkbox,{id:"edit-form-preview",label:"Preview"}),(0,ce.jsx)(ne.Form.Checkbox,{id:"edit-form-development",label:"Development"})]})},Or=ta;var N=require("react/jsx-runtime"),ra=({project:e,team:r})=>{let[t,n]=(0,Ee.useState)(),[a,o]=(0,Ee.useState)(),[s,c]=(0,Ee.useState)(),[i,u]=(0,Ee.useState)(),{push:l,pop:p}=(0,w.useNavigation)();async function b(){let h=await Zt(e.id,r),T=[],I=[],x=[],J=[];h.forEach(D=>{D.type==="system"?T.push(D):D.type==="plain"?I.push(D):D.type==="encrypted"?x.push(D):D.type==="secret"&&J.push(D)}),n(T),o(I),c(x),u(J)}(0,Ee.useEffect)(()=>{b()},[]);let m=async(h,T)=>{(await Xt(e.id,h,T)).key?((0,w.showToast)({style:w.Toast.Style.Success,title:"Environment variable updated"}),p(),await b()):(0,w.showToast)({style:w.Toast.Style.Failure,title:"Failed to update environment variable"})},d=async h=>{let T=await Qt(e.id,h,r);T.error?(0,w.showToast)({style:w.Toast.Style.Failure,title:"Failed to create environment variable"}):T&&(await b(),(0,w.showToast)({style:w.Toast.Style.Success,title:"Environment variable created"}),p())},g=!!(t&&a&&s&&i),k=!!t&&t.length>0,f=!!a&&a.length>0,V=!!s&&s.length>0,P=!!i&&i.length>0,y=h=>(0,N.jsxs)(w.ActionPanel,{children:[(0,N.jsx)(w.Action.Push,{title:"Edit",icon:w.Icon.Pencil,target:(0,N.jsx)(Ir,{envVar:h,updateEnvVar:m})}),(0,N.jsx)(w.Action,{title:"Delete",onAction:async()=>{await(0,w.confirmAlert)({title:`Are you sure you want to delete ${h.key}?`})&&Promise.all([Kt(e.id,h.id),b()])},icon:w.Icon.Trash})]});return(0,N.jsxs)(w.List,{navigationTitle:`Environment variables for ${e.name}`,isLoading:!g,children:[(0,N.jsx)(w.List.Item,{title:"New Environment Variable",icon:w.Icon.Plus,actions:(0,N.jsx)(w.ActionPanel,{children:(0,N.jsx)(w.Action,{title:"Add",onAction:()=>{l((0,N.jsx)(Or,{createEnvVar:d}))}})})}),k&&(0,N.jsx)(w.List.Section,{title:"System Environment Variables"}),k&&t.map(h=>(0,N.jsx)(dt,{type:h.type,envVar:h,actions:y(h)},h.id)),f&&(0,N.jsx)(w.List.Section,{title:"Plain Environment Variables"}),f&&a.map(h=>(0,N.jsx)(dt,{type:h.type,envVar:h,actions:y(h)},h.id)),V&&(0,N.jsx)(w.List.Section,{title:"Encrypted Environment Variables"}),V&&s.map(h=>(0,N.jsx)(dt,{type:h.type,envVar:h,actions:y(h)},h.id)),P&&(0,N.jsx)(w.List.Section,{title:"Secret Environment Variables"}),P&&i.map(h=>(0,N.jsx)(dt,{type:h.type,envVar:h,actions:y(h)},h.id))]})},dt=({envVar:e,actions:r})=>{let t=n=>{switch(n){case"system":return w.Icon.Desktop;case"secret":return w.Icon.EyeDisabled;case"encrypted":return w.Icon.BlankDocument;case"plain":return w.Icon.BlankDocument;default:return w.Icon.BlankDocument}};return(0,N.jsx)(w.List.Item,{title:e.key,subtitle:e.value,icon:t(e.type),actions:r,id:e.id},e.id)},Ur=ra;var K=require("react/jsx-runtime"),na=()=>{let{selectedTeam:e,teams:r,user:t}=De(),n=Yt(e),{isLoading:a,data:o,revalidate:s}=Oe(n,{headers:Te,mapResult(u){return{data:u.projects}},initialData:[]}),c=()=>{s()},{push:i}=(0,O.useNavigation)();return(0,K.jsx)(O.List,{searchBarPlaceholder:"Search Projects...",navigationTitle:"Results",isLoading:a,searchBarAccessory:(0,K.jsx)(K.Fragment,{children:t&&(0,K.jsx)(it,{onTeamChange:c})}),children:o.map(u=>(0,K.jsx)(O.List.Item,{id:u.id,title:u.name,subtitle:u.framework??"",keywords:[u.framework||""],actions:(0,K.jsxs)(O.ActionPanel,{children:[(0,K.jsx)(O.Action.Push,{title:"Search Deployments",icon:O.Icon.MagnifyingGlass,target:(0,K.jsx)(Dr,{projectId:u.id})}),(0,K.jsx)(O.Action,{title:"Inspect Most Recent Deployment",icon:O.Icon.ArrowRight,onAction:async()=>{u.latestDeployments?.length?i((0,K.jsx)(ft,{username:t?.username,deployment:u.latestDeployments[0],selectedTeam:r?.find(l=>l.id===e)})):(0,O.showToast)({style:O.Toast.Style.Failure,title:"No deployments found"})}}),!!u.latestDeployments?.length&&(0,K.jsx)(O.Action,{title:"Visit Most Recent Deployment",icon:O.Icon.Link,onAction:async()=>{(0,O.open)("https://"+u.latestDeployments?.[0].url||"")}}),(0,K.jsx)(O.Action,{title:"Inspect Environment Variables",icon:O.Icon.ArrowRight,onAction:async()=>{i((0,K.jsx)(Ur,{team:e,project:u}))}})]}),accessories:[{text:u.latestDeployments?.length&&u.latestDeployments[0].createdAt?Se(u.latestDeployments[0].createdAt,new Date):"never",tooltip:u.latestDeployments?.length&&u.latestDeployments[0].createdAt?new Date(u.latestDeployments[0].createdAt).toLocaleString():""}]},u.id))})},Lr=na;var Vr=require("@raycast/api");var aa=async()=>{if((0,Vr.getPreferenceValues)().accessToken.length!==24)throw new Error("Invalid token length. Expected 24 characters.");if(!await Be())throw new Error("Failed to fetch user data. Token may be invalid.");return!0},Nr=aa;var ue=require("@raycast/api"),ht=require("react/jsx-runtime"),sa=()=>(0,ht.jsx)(ue.Detail,{markdown:`# ERROR 

 Invalid token detected. Please set one in the settings.`,actions:(0,ht.jsx)(ue.ActionPanel,{children:(0,ht.jsx)(ue.Action,{icon:ue.Icon.Gear,title:"Open Extension Preferences",onAction:ue.openExtensionPreferences})})}),Fr=sa;var Mr=require("@raycast/api"),Ue=require("react/jsx-runtime"),oa=({children:e})=>{let{isLoading:r,error:t}=Ut(Nr,[],{failureToastOptions:{title:"Invalid token detected. Please set one in the settings."}});return r?(0,Ue.jsx)(Mr.Detail,{isLoading:!0}):t?(0,Ue.jsx)(Fr,{}):(0,Ue.jsx)(Ue.Fragment,{children:e})},jr=oa;var Lt=require("react/jsx-runtime");function ia(){return(0,Lt.jsx)(jr,{children:(0,Lt.jsx)(Lr,{})})}var ca=ia;
/*! Bundled license information:

use-sync-external-store/cjs/use-sync-external-store-shim.production.js:
  (**
   * @license React
   * use-sync-external-store-shim.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

use-sync-external-store/cjs/use-sync-external-store-shim.development.js:
  (**
   * @license React
   * use-sync-external-store-shim.development.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
